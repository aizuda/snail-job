import{a as B,b as I}from"./search-form.vue_vue_type_script_setup_true_lang-D7hHwQXT.js";import{d as S,Z as W,a0 as $,o as R,c as z,w as k,f as t,h as e,$ as o,L as F,b as M,ah as w,bi as j,Y as y,g as N,a3 as T,G as C,F as D,ak as O}from"./index--PhRNylI.js";import{d as U}from"./dashboard-DxAW8khm.js";import{_ as V,u as G,a as K}from"./table-DvozQPKE.js";import{_ as q}from"./select-group.vue_vue_type_script_setup_true_lang-CNpCk88a.js";import{b as A}from"./Grid-C8sbif0M.js";import"./group-Rd_jp_gh.js";const E=S({name:"PodsSearch",__name:"pods-search",props:{model:{required:!0},modelModifiers:{}},emits:W(["reset","search"],["update:model"]),setup(d,{emit:b}){const m=b,l=$(d,"model");function h(){m("reset")}function p(){m("search")}return(x,f)=>{const u=V,v=B;return R(),z(v,{model:l.value,onSearch:p,onReset:h},{default:k(()=>[t(u,{span:"24 s:12 m:6",label:e(o)("page.pods.groupName"),path:"groupName",class:"pr-24px"},{default:k(()=>[t(q,{value:l.value.groupName,"onUpdate:value":f[0]||(f[0]=i=>l.value.groupName=i),placeholder:e(o)("page.pods.form.groupName"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])}}}),H={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function P(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!O(d)}const te=S({name:"pods",__name:"index",setup(d){const b=F(),{columns:m,columnChecks:l,data:h,getData:p,loading:x,mobilePagination:f,searchParams:u,resetSearchParams:v}=G({apiFn:U,apiParams:{page:1,size:10,groupName:null},columns:()=>[{key:"hostId",title:o("page.pods.hostId"),align:"left",resizable:!0,width:150,minWidth:150,maxWidth:200},{key:"nodeType",title:o("page.pods.nodeType"),align:"center",width:80,render:s=>{if(s.nodeType===null)return null;const a={1:"info",2:"primary"},r=o(j[s.nodeType]);return t(y,{type:a[s.nodeType]},P(r)?r:{default:()=>[r]})}},{key:"groupName",title:o("page.pods.groupName"),align:"left",width:120,resizable:!0,minWidth:120,maxWidth:200},{key:"hostIp",title:o("page.pods.hostIp"),align:"left",width:120},{key:"hostPort",title:o("page.pods.hostPort"),align:"left",width:80},{key:"consumerBuckets",title:o("page.pods.consumerBuckets"),align:"left",width:300,resizable:!0,minWidth:120,maxWidth:400,render:s=>{if(s.nodeType===null)return null;const a=g=>{var n;const c=g?(n=s.consumerBuckets)==null?void 0:n.slice(0,g):s.consumerBuckets;return c==null?void 0:c.map(_=>t(y,{type:"error",key:_,class:"m-1 justify-center"},P(_)?_:{default:()=>[_]}))},r=()=>t(y,{type:"info"},{default:()=>[s.contextPath??"/"]});return s.nodeType===1?t(T,null,[N("Path: "),r()]):t(T,null,[t("span",null,[N("Bucket: ")]),a(10),t(C,{trigger:"hover"},{trigger:()=>t(y,{type:"error"},{default:()=>[N("...")]}),default:()=>t("div",{class:"grid grid-cols-16"},[a()])})])}},{key:"updateDt",title:o("page.pods.updateDt"),align:"left",width:130}]}),{checkedRowKeys:i}=K(h,p);return(s,a)=>{const r=I,g=A,c=D;return R(),M("div",H,[t(E,{model:e(u),"onUpdate:model":a[0]||(a[0]=n=>w(u)?u.value=n:null),onReset:e(v),onSearch:e(p)},null,8,["model","onReset","onSearch"]),t(c,{title:e(o)("page.pods.title"),bordered:!1,size:"small","header-class":"view-card-header",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":k(()=>[t(r,{columns:e(l),"onUpdate:columns":a[1]||(a[1]=n=>w(l)?l.value=n:null),"disabled-delete":e(i).length===0,loading:e(x),"show-add":!1,"show-delete":!1,onRefresh:e(p)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:k(()=>[t(g,{"checked-row-keys":e(i),"onUpdate:checkedRowKeys":a[2]||(a[2]=n=>w(i)?i.value=n:null),columns:e(m),data:e(h),"flex-height":!e(b).isMobile,"scroll-x":962,loading:e(x),remote:"","row-key":n=>n.hostId,pagination:e(f),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"])]),_:1},8,["title"])])}}});export{te as default};
