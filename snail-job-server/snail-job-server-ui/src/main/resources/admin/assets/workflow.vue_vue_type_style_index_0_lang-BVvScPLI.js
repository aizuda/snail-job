import{b0 as Q,bk as ee,d as W,b1 as Ee,ct as it,r as $,a as oe,i as ze,bs as Zt,al as O,cu as Qt,q as G,ap as ce,b5 as fe,bj as J,cv as eo,cw as to,bp as we,cx as oo,cy as no,aX as Bt,bU as bt,b4 as Pe,cz as ao,cA as rt,bq as lo,b7 as Ct,cB as so,O as io,bC as ro,cm as nt,cC as uo,bH as yt,bJ as Tt,cD as co,aW as po,aY as mo,aZ as fo,cE as vo,by as ho,bz as dt,D as ve,cF as _o,b6 as go,b2 as bo,B as ae,b8 as Se,b9 as wt,cG as kt,cH as yo,cI as et,cJ as tt,cK as wo,bb as ot,o as f,b as M,e as b,cn as Ne,v as ue,a3 as le,a1 as re,x as ke,s as ie,l as pe,cL as ko,c as E,w as s,g as U,t as I,f as l,cM as Ae,h as v,cN as No,cO as ut,aa as Ce,E as Oe,H as qe,I as He,cP as Ye,cQ as Fe,$ as j,cR as Dt,cS as It,Z as $o,a0 as at,cT as Rt,cU as xo,ai as R,av as So,cV as Be,Y as Le,cW as te,cX as Nt,cY as $t,cZ as xt,au as Ut,aw as Vo,c_ as Te,c$ as De,G as ct,d0 as Bo,aj as Lt,_ as We,a8 as Ie,C as Ve,aG as Mt,d1 as Co,d2 as jt,d3 as To,d4 as lt,d5 as Do,aK as Io,aL as Et,d6 as Ro,d7 as Uo,aD as Lo,d8 as Mo}from"./index-BxI_8ir5.js";import{H as jo,j as Eo,e as zo,_ as Po,g as zt}from"./job-task-list-table.vue_vue_type_script_setup_true_lang-DO4S_MS8.js";import{j as Ao,k as Oo,l as qo,m as Ho}from"./workflow-C49bAB05.js";import{h as Yo,i as Fo}from"./job-Cl2Rizrz.js";import{A as Wo,_ as Xe,a as Ge,h as Xo,d as Pt,c as At}from"./Grid-D6if5aLa.js";import{_ as Re}from"./detail-drawer-BdQyK8cj.js";import{_ as $e,a as xe}from"./DescriptionsItem-D5s6FkGL.js";import{_ as Go}from"./log-drawer-m-GvVrZC.js";import{_ as Jo}from"./table-KwvlieBb.js";import{_ as Ko,s as Zo,j as Qo,o as en}from"./code-mirror.vue_vue_type_script_setup_true_lang-yaz4Kucu.js";import{_ as tn}from"./cron-input.vue_vue_type_style_index_0_lang-C2hp-gtC.js";import{g as on}from"./group-BXqOqznU.js";function nn(e){return typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e}function an(e){return e instanceof HTMLElement?e.scrollTop:window.scrollY}function ln(e){return e instanceof HTMLElement?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}const sn=Q("affix",[ee("affixed",{position:"fixed"},[ee("absolute-positioned",{position:"absolute"})])]),rn={listenTo:[String,Object,Function],top:Number,bottom:Number,triggerTop:Number,triggerBottom:Number,position:{type:String,default:"fixed"},offsetTop:{type:Number,validator:()=>!0,default:void 0},offsetBottom:{type:Number,validator:()=>!0,default:void 0},target:{type:Function,validator:()=>!0,default:void 0}},dn=W({name:"Affix",props:rn,setup(e){const{mergedClsPrefixRef:a}=Ee(e);it("-affix",sn,a);let i=null;const c=$(!1),n=$(!1),t=$(null),o=$(null),p=oe(()=>n.value||c.value),u=oe(()=>{var g,w;return(w=(g=e.triggerTop)!==null&&g!==void 0?g:e.offsetTop)!==null&&w!==void 0?w:e.top}),m=oe(()=>{var g,w;return(w=(g=e.top)!==null&&g!==void 0?g:e.triggerTop)!==null&&w!==void 0?w:e.offsetTop}),d=oe(()=>{var g,w;return(w=(g=e.bottom)!==null&&g!==void 0?g:e.triggerBottom)!==null&&w!==void 0?w:e.offsetBottom}),r=oe(()=>{var g,w;return(w=(g=e.triggerBottom)!==null&&g!==void 0?g:e.offsetBottom)!==null&&w!==void 0?w:e.bottom}),S=$(null),h=()=>{const{target:g,listenTo:w}=e;g?i=g():w?i=nn(w):i=document,i&&(i.addEventListener("scroll",y),y())};function y(){Qt(V)}function V(){const{value:g}=S;if(!i||!g)return;const w=an(i);if(p.value){o.value!==null&&w<o.value&&(c.value=!1,o.value=null),t.value!==null&&w>t.value&&(n.value=!1,t.value=null);return}const z=ln(i),P=g.getBoundingClientRect(),L=P.top-z.top,H=z.bottom-P.bottom,_=u.value,B=r.value;_!==void 0&&L<=_?(c.value=!0,o.value=w-(_-L)):(c.value=!1,o.value=null),B!==void 0&&H<=B?(n.value=!0,t.value=w+B-H):(n.value=!1,t.value=null)}return ze(()=>{h()}),Zt(()=>{i&&i.removeEventListener("scroll",y)}),{selfRef:S,affixed:p,mergedClsPrefix:a,mergedstyle:oe(()=>{const g={};return c.value&&u.value!==void 0&&m.value!==void 0&&(g.top=`${m.value}px`),n.value&&r.value!==void 0&&d.value!==void 0&&(g.bottom=`${d.value}px`),g})}},render(){const{mergedClsPrefix:e}=this;return O("div",{ref:"selfRef",class:[`${e}-affix`,{[`${e}-affix--affixed`]:this.affixed,[`${e}-affix--absolute-positioned`]:this.position==="absolute"}],style:this.mergedstyle},this.$slots)}}),un=W({name:"ArrowUp",render(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},O("g",{fill:"none"},O("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),St=W({name:"SlotMachineNumber",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],required:!0},oldOriginalNumber:{type:Number,default:void 0},newOriginalNumber:{type:Number,default:void 0}},setup(e){const a=$(null),i=$(e.value),c=$(e.value),n=$("up"),t=$(!1),o=oe(()=>t.value?`${e.clsPrefix}-base-slot-machine-current-number--${n.value}-scroll`:null),p=oe(()=>t.value?`${e.clsPrefix}-base-slot-machine-old-number--${n.value}-scroll`:null);G(fe(e,"value"),(d,r)=>{i.value=r,c.value=d,ce(u)});function u(){const d=e.newOriginalNumber,r=e.oldOriginalNumber;r===void 0||d===void 0||(d>r?m("up"):r>d&&m("down"))}function m(d){n.value=d,t.value=!1,ce(()=>{var r;(r=a.value)===null||r===void 0||r.offsetWidth,t.value=!0})}return()=>{const{clsPrefix:d}=e;return O("span",{ref:a,class:`${d}-base-slot-machine-number`},i.value!==null?O("span",{class:[`${d}-base-slot-machine-old-number ${d}-base-slot-machine-old-number--top`,p.value]},i.value):null,O("span",{class:[`${d}-base-slot-machine-current-number`,o.value]},O("span",{ref:"numberWrapper",class:[`${d}-base-slot-machine-current-number__inner`,typeof e.value!="number"&&`${d}-base-slot-machine-current-number__inner--not-number`]},c.value)),i.value!==null?O("span",{class:[`${d}-base-slot-machine-old-number ${d}-base-slot-machine-old-number--bottom`,p.value]},i.value):null)}}}),{cubicBezierEaseOut:ge}=eo;function cn({duration:e=".2s"}={}){return[J("&.fade-up-width-expand-transition-leave-active",{transition:`
 opacity ${e} ${ge},
 max-width ${e} ${ge},
 transform ${e} ${ge}
 `}),J("&.fade-up-width-expand-transition-enter-active",{transition:`
 opacity ${e} ${ge},
 max-width ${e} ${ge},
 transform ${e} ${ge}
 `}),J("&.fade-up-width-expand-transition-enter-to",{opacity:1,transform:"translateX(0) translateY(0)"}),J("&.fade-up-width-expand-transition-enter-from",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"}),J("&.fade-up-width-expand-transition-leave-from",{opacity:1,transform:"translateY(0)"}),J("&.fade-up-width-expand-transition-leave-to",{maxWidth:"0 !important",opacity:0,transform:"translateY(60%)"})]}const pn=J([J("@keyframes n-base-slot-machine-fade-up-in",`
 from {
 transform: translateY(60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),J("@keyframes n-base-slot-machine-fade-down-in",`
 from {
 transform: translateY(-60%);
 opacity: 0;
 }
 to {
 transform: translateY(0);
 opacity: 1;
 }
 `),J("@keyframes n-base-slot-machine-fade-up-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(-60%);
 opacity: 0;
 }
 `),J("@keyframes n-base-slot-machine-fade-down-out",`
 from {
 transform: translateY(0%);
 opacity: 1;
 }
 to {
 transform: translateY(60%);
 opacity: 0;
 }
 `),Q("base-slot-machine",`
 overflow: hidden;
 white-space: nowrap;
 display: inline-block;
 height: 18px;
 line-height: 18px;
 `,[Q("base-slot-machine-number",`
 display: inline-block;
 position: relative;
 height: 18px;
 width: .6em;
 max-width: .6em;
 `,[cn({duration:".2s"}),to({duration:".2s",delay:"0s"}),Q("base-slot-machine-old-number",`
 display: inline-block;
 opacity: 0;
 position: absolute;
 left: 0;
 right: 0;
 `,[ee("top",{transform:"translateY(-100%)"}),ee("bottom",{transform:"translateY(100%)"}),ee("down-scroll",{animation:"n-base-slot-machine-fade-down-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ee("up-scroll",{animation:"n-base-slot-machine-fade-up-out .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1})]),Q("base-slot-machine-current-number",`
 display: inline-block;
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 1;
 transform: translateY(0);
 width: .6em;
 `,[ee("down-scroll",{animation:"n-base-slot-machine-fade-down-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),ee("up-scroll",{animation:"n-base-slot-machine-fade-up-in .2s cubic-bezier(0, 0, .2, 1)",animationIterationCount:1}),we("inner",`
 display: inline-block;
 position: absolute;
 right: 0;
 top: 0;
 width: .6em;
 `,[ee("not-number",`
 right: unset;
 left: 0;
 `)])])])])]),mn=W({name:"BaseSlotMachine",props:{clsPrefix:{type:String,required:!0},value:{type:[Number,String],default:0},max:{type:Number,default:void 0},appeared:{type:Boolean,required:!0}},setup(e){it("-base-slot-machine",pn,fe(e,"clsPrefix"));const a=$(),i=$(),c=oe(()=>{if(typeof e.value=="string")return[];if(e.value<1)return[0];const n=[];let t=e.value;for(e.max!==void 0&&(t=Math.min(e.max,t));t>=1;)n.push(t%10),t/=10,t=Math.floor(t);return n.reverse(),n});return G(fe(e,"value"),(n,t)=>{typeof n=="string"?(i.value=void 0,a.value=void 0):typeof t=="string"?(i.value=n,a.value=void 0):(i.value=n,a.value=t)}),()=>{const{value:n,clsPrefix:t}=e;return typeof n=="number"?O("span",{class:`${t}-base-slot-machine`},O(no,{name:"fade-up-width-expand-transition",tag:"span"},{default:()=>c.value.map((o,p)=>O(St,{clsPrefix:t,key:c.value.length-p-1,oldOriginalNumber:a.value,newOriginalNumber:i.value,value:o}))}),O(oo,{key:"+",width:!0},{default:()=>e.max!==void 0&&e.max<n?O(St,{clsPrefix:t,value:"+"}):null})):O("span",{class:`${t}-base-slot-machine`},n)}}}),fn=e=>{const{errorColor:a,infoColor:i,successColor:c,warningColor:n,fontFamily:t}=e;return{color:a,colorInfo:i,colorSuccess:c,colorError:a,colorWarning:n,fontSize:"12px",fontFamily:t}},vn={name:"Badge",common:Bt,self:fn},hn=J([J("@keyframes badge-wave-spread",{from:{boxShadow:"0 0 0.5px 0px var(--n-ripple-color)",opacity:.6},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)",opacity:0}}),Q("badge",`
 display: inline-flex;
 position: relative;
 vertical-align: middle;
 font-family: var(--n-font-family);
 `,[ee("as-is",[Q("badge-sup",{position:"static",transform:"translateX(0)"},[bt({transformOrigin:"left bottom",originalTransform:"translateX(0)"})])]),ee("dot",[Q("badge-sup",`
 height: 8px;
 width: 8px;
 padding: 0;
 min-width: 8px;
 left: 100%;
 bottom: calc(100% - 4px);
 `,[J("::before","border-radius: 4px;")])]),Q("badge-sup",`
 background: var(--n-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: #FFF;
 position: absolute;
 height: 18px;
 line-height: 18px;
 border-radius: 9px;
 padding: 0 6px;
 text-align: center;
 font-size: var(--n-font-size);
 transform: translateX(-50%);
 left: 100%;
 bottom: calc(100% - 9px);
 font-variant-numeric: tabular-nums;
 z-index: 1;
 display: flex;
 align-items: center;
 `,[bt({transformOrigin:"left bottom",originalTransform:"translateX(-50%)"}),Q("base-wave",{zIndex:1,animationDuration:"2s",animationIterationCount:"infinite",animationDelay:"1s",animationTimingFunction:"var(--n-ripple-bezier)",animationName:"badge-wave-spread"}),J("&::before",`
 opacity: 0;
 transform: scale(1);
 border-radius: 9px;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)])])]),_n=Object.assign(Object.assign({},Pe.props),{value:[String,Number],max:Number,dot:Boolean,type:{type:String,default:"default"},show:{type:Boolean,default:!0},showZero:Boolean,processing:Boolean,color:String,offset:Array}),Je=W({name:"Badge",props:_n,setup(e,{slots:a}){const{mergedClsPrefixRef:i,inlineThemeDisabled:c,mergedRtlRef:n}=Ee(e),t=Pe("Badge","-badge",hn,vn,e,i),o=$(!1),p=()=>{o.value=!0},u=()=>{o.value=!1},m=oe(()=>e.show&&(e.dot||e.value!==void 0&&!(!e.showZero&&Number(e.value)<=0)||!ao(a.value)));ze(()=>{m.value&&(o.value=!0)});const d=rt("Badge",n,i),r=oe(()=>{const{type:y,color:V}=e,{common:{cubicBezierEaseInOut:g,cubicBezierEaseOut:w},self:{[lo("color",y)]:z,fontFamily:P,fontSize:L}}=t.value;return{"--n-font-size":L,"--n-font-family":P,"--n-color":V||z,"--n-ripple-color":V||z,"--n-bezier":g,"--n-ripple-bezier":w}}),S=c?Ct("badge",oe(()=>{let y="";const{type:V,color:g}=e;return V&&(y+=V[0]),g&&(y+=so(g)),y}),r,e):void 0,h=oe(()=>{const{offset:y}=e;if(!y)return;const[V,g]=y,w=typeof V=="number"?`${V}px`:V,z=typeof g=="number"?`${g}px`:g;return{transform:`translate(calc(${d!=null&&d.value?"50%":"-50%"} + ${w}), ${z})`}});return{rtlEnabled:d,mergedClsPrefix:i,appeared:o,showBadge:m,handleAfterEnter:p,handleAfterLeave:u,cssVars:c?void 0:r,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender,offsetStyle:h}},render(){var e;const{mergedClsPrefix:a,onRender:i,themeClass:c,$slots:n}=this;i==null||i();const t=(e=n.default)===null||e===void 0?void 0:e.call(n);return O("div",{class:[`${a}-badge`,this.rtlEnabled&&`${a}-badge--rtl`,c,{[`${a}-badge--dot`]:this.dot,[`${a}-badge--as-is`]:!t}],style:this.cssVars},t,O(io,{name:"fade-in-scale-up-transition",onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>this.showBadge?O("sup",{class:`${a}-badge-sup`,title:ro(this.value),style:this.offsetStyle},nt(n.value,()=>[this.dot?null:O(mn,{clsPrefix:a,appeared:this.appeared,max:this.max,value:this.value})]),this.processing?O(uo,{clsPrefix:a}):null):null}))}}),Z="0!important",Ot="-1px!important";function be(e){return ee(e+"-type",[J("& +",[Q("button",{},[ee(e+"-type",[we("border",{borderLeftWidth:Z}),we("state-border",{left:Ot})])])])])}function ye(e){return ee(e+"-type",[J("& +",[Q("button",[ee(e+"-type",[we("border",{borderTopWidth:Z}),we("state-border",{top:Ot})])])])])}const gn=Q("button-group",`
 flex-wrap: nowrap;
 display: inline-flex;
 position: relative;
`,[yt("vertical",{flexDirection:"row"},[yt("rtl",[Q("button",[J("&:first-child:not(:last-child)",`
 margin-right: ${Z};
 border-top-right-radius: ${Z};
 border-bottom-right-radius: ${Z};
 `),J("&:last-child:not(:first-child)",`
 margin-left: ${Z};
 border-top-left-radius: ${Z};
 border-bottom-left-radius: ${Z};
 `),J("&:not(:first-child):not(:last-child)",`
 margin-left: ${Z};
 margin-right: ${Z};
 border-radius: ${Z};
 `),be("default"),ee("ghost",[be("primary"),be("info"),be("success"),be("warning"),be("error")])])])]),ee("vertical",{flexDirection:"column"},[Q("button",[J("&:first-child:not(:last-child)",`
 margin-bottom: ${Z};
 margin-left: ${Z};
 margin-right: ${Z};
 border-bottom-left-radius: ${Z};
 border-bottom-right-radius: ${Z};
 `),J("&:last-child:not(:first-child)",`
 margin-top: ${Z};
 margin-left: ${Z};
 margin-right: ${Z};
 border-top-left-radius: ${Z};
 border-top-right-radius: ${Z};
 `),J("&:not(:first-child):not(:last-child)",`
 margin: ${Z};
 border-radius: ${Z};
 `),ye("default"),ee("ghost",[ye("primary"),ye("info"),ye("success"),ye("warning"),ye("error")])])])]),bn={size:{type:String,default:void 0},vertical:Boolean},yn=W({name:"ButtonGroup",props:bn,setup(e){const{mergedClsPrefixRef:a,mergedRtlRef:i}=Ee(e);return it("-button-group",gn,a),Tt(co,e),{rtlEnabled:rt("ButtonGroup",i,a),mergedClsPrefix:a}},render(){const{mergedClsPrefix:e}=this;return O("div",{class:[`${e}-button-group`,this.rtlEnabled&&`${e}-button-group--rtl`,this.vertical&&`${e}-button-group--vertical`],role:"group"},this.$slots)}}),wn=()=>vo,kn=po({name:"DynamicInput",common:Bt,peers:{Input:mo,Button:fo},self:wn}),pt=ho("n-dynamic-input"),Nn=W({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:e,placeholderRef:a}=dt(pt);return{mergedTheme:e,placeholder:a}},render(){const{mergedTheme:e,placeholder:a,value:i,clsPrefix:c,onUpdateValue:n,disabled:t}=this;return O("div",{class:`${c}-dynamic-input-preset-input`},O(ve,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:i,placeholder:a,onUpdateValue:n,disabled:t}))}}),$n=W({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(e){const{mergedThemeRef:a,keyPlaceholderRef:i,valuePlaceholderRef:c}=dt(pt);return{mergedTheme:a,keyPlaceholder:i,valuePlaceholder:c,handleKeyInput(n){e.onUpdateValue({key:n,value:e.value.value})},handleValueInput(n){e.onUpdateValue({key:e.value.key,value:n})}}},render(){const{mergedTheme:e,keyPlaceholder:a,valuePlaceholder:i,value:c,clsPrefix:n,disabled:t}=this;return O("div",{class:`${n}-dynamic-input-preset-pair`},O(ve,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:c.key,class:`${n}-dynamic-input-pair-input`,placeholder:a,onUpdateValue:this.handleKeyInput,disabled:t}),O(ve,{theme:e.peers.Input,"theme-overrides":e.peerOverrides.Input,value:c.value,class:`${n}-dynamic-input-pair-input`,placeholder:i,onUpdateValue:this.handleValueInput,disabled:t}))}}),xn=Q("dynamic-input",{width:"100%"},[Q("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[Q("dynamic-input-preset-input",{flex:1,alignItems:"center"}),Q("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[Q("dynamic-input-pair-input",[J("&:first-child",{"margin-right":"12px"})])]),we("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[ee("icon",{cursor:"pointer"})]),J("&:last-child",{marginBottom:0})]),Q("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[Q("form-item-blank",{paddingTop:"0 !important"})])]),Me=new WeakMap,Sn=Object.assign(Object.assign({},Pe.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Vn=W({name:"DynamicInput",props:Sn,setup(e,{slots:a}){const{mergedComponentPropsRef:i,mergedClsPrefixRef:c,mergedRtlRef:n,inlineThemeDisabled:t}=Ee(),o=dt(_o,null),p=$(e.defaultValue),u=fe(e,"value"),m=go(u,p),d=Pe("DynamicInput","-dynamic-input",xn,kn,e,c),r=oe(()=>{const{value:N}=m;if(Array.isArray(N)){const{max:T}=e;return T!==void 0&&N.length>=T}return!1}),S=oe(()=>{const{value:N}=m;return Array.isArray(N)?N.length<=e.min:!0}),h=oe(()=>{var N,T;return(T=(N=i==null?void 0:i.value)===null||N===void 0?void 0:N.DynamicInput)===null||T===void 0?void 0:T.buttonSize});function y(N){const{onInput:T,"onUpdate:value":k,onUpdateValue:C}=e;T&&ot(T,N),k&&ot(k,N),C&&ot(C,N),p.value=N}function V(N,T){if(N==null||typeof N!="object")return T;const k=et(N)?tt(N):N;let C=Me.get(k);return C===void 0&&Me.set(k,C=wo()),C}function g(N,T){const{value:k}=m,C=Array.from(k??[]),F=C[N];if(C[N]=T,F&&T&&typeof F=="object"&&typeof T=="object"){const ne=et(F)?tt(F):F,A=et(T)?tt(T):T,q=Me.get(ne);q!==void 0&&Me.set(A,q)}y(C)}function w(){z(-1)}function z(N){const{value:T}=m,{onCreate:k}=e,C=Array.from(T??[]);if(k)C.splice(N+1,0,k(N+1)),y(C);else if(a.default)C.splice(N+1,0,null),y(C);else switch(e.preset){case"input":C.splice(N+1,0,""),y(C);break;case"pair":C.splice(N+1,0,{key:"",value:""}),y(C);break}}function P(N){const{value:T}=m;if(!Array.isArray(T))return;const{min:k}=e;if(T.length<=k)return;const{onRemove:C}=e;C&&C(N);const F=Array.from(T);F.splice(N,1),y(F)}function L(N,T,k){if(T<0||k<0||T>=N.length||k>=N.length||T===k)return;const C=N[T];N[T]=N[k],N[k]=C}function H(N,T){const{value:k}=m;if(!Array.isArray(k))return;const C=Array.from(k);N==="up"&&L(C,T,T-1),N==="down"&&L(C,T,T+1),y(C)}Tt(pt,{mergedThemeRef:d,keyPlaceholderRef:fe(e,"keyPlaceholder"),valuePlaceholderRef:fe(e,"valuePlaceholder"),placeholderRef:fe(e,"placeholder")});const _=rt("DynamicInput",n,c),B=oe(()=>{const{self:{actionMargin:N,actionMarginRtl:T}}=d.value;return{"--action-margin":N,"--action-margin-rtl":T}}),D=t?Ct("dynamic-input",void 0,B,e):void 0;return{locale:bo("DynamicInput").localeRef,rtlEnabled:_,buttonSize:h,mergedClsPrefix:c,NFormItem:o,uncontrolledValue:p,mergedValue:m,insertionDisabled:r,removeDisabled:S,handleCreateClick:w,ensureKey:V,handleValueChange:g,remove:P,move:H,createItem:z,mergedTheme:d,cssVars:t?void 0:B,themeClass:D==null?void 0:D.themeClass,onRender:D==null?void 0:D.onRender}},render(){const{$slots:e,itemClass:a,buttonSize:i,mergedClsPrefix:c,mergedValue:n,locale:t,mergedTheme:o,keyField:p,itemStyle:u,preset:m,showSortButton:d,NFormItem:r,ensureKey:S,handleValueChange:h,remove:y,createItem:V,move:g,onRender:w,disabled:z}=this;return w==null||w(),O("div",{class:[`${c}-dynamic-input`,this.rtlEnabled&&`${c}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(n)||n.length===0?O(ae,Object.assign({block:!0,ghost:!0,dashed:!0,size:i},this.createButtonProps,{disabled:this.insertionDisabled||z,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>nt(e["create-button-default"],()=>[t.create]),icon:()=>nt(e["create-button-icon"],()=>[O(Se,{clsPrefix:c},{default:()=>O(wt,null)})])}):n.map((P,L)=>O("div",{key:p?P[p]:S(P,L),"data-key":p?P[p]:S(P,L),class:[`${c}-dynamic-input-item`,a],style:u},kt(e.default,{value:n[L],index:L},()=>[m==="input"?O(Nn,{disabled:z,clsPrefix:c,value:n[L],parentPath:r?r.path.value:void 0,path:r!=null&&r.path.value?`${r.path.value}[${L}]`:void 0,onUpdateValue:H=>{h(L,H)}}):m==="pair"?O($n,{disabled:z,clsPrefix:c,value:n[L],parentPath:r?r.path.value:void 0,path:r!=null&&r.path.value?`${r.path.value}[${L}]`:void 0,onUpdateValue:H=>{h(L,H)}}):null]),kt(e.action,{value:n[L],index:L,create:V,remove:y,move:g},()=>[O("div",{class:`${c}-dynamic-input-item__action`},O(yn,{size:i},{default:()=>[O(ae,{disabled:this.removeDisabled||z,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,circle:!0,onClick:()=>{y(L)}},{icon:()=>O(Se,{clsPrefix:c},{default:()=>O(yo,null)})}),O(ae,{disabled:this.insertionDisabled||z,circle:!0,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,onClick:()=>{V(L)}},{icon:()=>O(Se,{clsPrefix:c},{default:()=>O(wt,null)})}),d?O(ae,{disabled:L===0||z,circle:!0,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,onClick:()=>{g("up",L)}},{icon:()=>O(Se,{clsPrefix:c},{default:()=>O(un,null)})}):null,d?O(ae,{disabled:L===n.length-1||z,circle:!0,theme:o.peers.Button,themeOverrides:o.peerOverrides.Button,onClick:()=>{g("down",L)}},{icon:()=>O(Se,{clsPrefix:c},{default:()=>O(Wo,null)})}):null]}))]))))}}),Bn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Cn=b("path",{fill:"currentColor",d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8"},null,-1),Tn=b("path",{fill:"currentColor",d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},null,-1),Dn=[Cn,Tn];function In(e,a){return f(),M("svg",Bn,[...Dn])}const qt={name:"ant-design-plus-outlined",render:In},Rn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Un=b("path",{fill:"currentColor",d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),Ln=[Un];function Mn(e,a){return f(),M("svg",Rn,[...Ln])}const jn={name:"ant-design-minus-outlined",render:Mn},Vt={y:{t:"top",m:"marginTop",b:"bottom"},x:{l:"left",m:"marginLeft",r:"right"}};function En(e){e.forEach((a,i)=>{document.documentElement.addEventListener(i,a)})}function zn(e){e.forEach((a,i)=>{document.documentElement.removeEventListener(i,a)})}const Pn={name:"vue-drag-resize",emits:["clicked","dragging","dragstop","resizing","resizestop","activated","deactivated"],props:{stickSize:{type:Number,default:8},parentScaleX:{type:Number,default:1},parentScaleY:{type:Number,default:1},isActive:{type:Boolean,default:!1},preventActiveBehavior:{type:Boolean,default:!1},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},aspectRatio:{type:Boolean,default:!1},parentLimitation:{type:Boolean,default:!1},snapToGrid:{type:Boolean,default:!1},gridX:{type:Number,default:50,validator(e){return e>=0}},gridY:{type:Number,default:50,validator(e){return e>=0}},parentW:{type:Number,default:0,validator(e){return e>=0}},parentH:{type:Number,default:0,validator(e){return e>=0}},w:{type:[String,Number],default:200,validator(e){return typeof e=="string"?e==="auto":e>=0}},h:{type:[String,Number],default:200,validator(e){return typeof e=="string"?e==="auto":e>=0}},minw:{type:Number,default:50,validator(e){return e>=0}},minh:{type:Number,default:50,validator(e){return e>=0}},x:{type:Number,default:0,validator(e){return typeof e=="number"}},y:{type:Number,default:0,validator(e){return typeof e=="number"}},z:{type:[String,Number],default:"auto",validator(e){return typeof e=="string"?e==="auto":e>=0}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},sticks:{type:Array,default(){return["tl","tm","tr","mr","br","bm","bl","ml"]}},axis:{type:String,default:"both",validator(e){return["x","y","both","none"].indexOf(e)!==-1}},contentClass:{type:String,required:!1,default:""}},data(){return{fixAspectRatio:null,active:null,zIndex:null,parentWidth:null,parentHeight:null,left:null,top:null,right:null,bottom:null,minHeight:null}},beforeCreate(){this.stickDrag=!1,this.bodyDrag=!1,this.dimensionsBeforeMove={pointerX:0,pointerY:0,x:0,y:0,w:0,h:0},this.limits={left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}},this.currentStick=null},mounted(){this.parentElement=this.$el.parentNode,this.parentWidth=this.parentW?this.parentW:this.parentElement.clientWidth,this.parentHeight=this.parentH?this.parentH:this.parentElement.clientHeight,this.left=this.x,this.top=this.y,this.right=this.parentWidth-(this.w==="auto"?this.$refs.container.scrollWidth:this.w)-this.left,this.bottom=this.parentHeight-(this.h==="auto"?this.$refs.container.scrollHeight:this.h)-this.top,this.domEvents=new Map([["mousemove",this.move],["mouseup",this.up],["mouseleave",this.up],["mousedown",this.deselect],["touchmove",this.move],["touchend",this.up],["touchcancel",this.up],["touchstart",this.up]]),En(this.domEvents),this.dragHandle&&[...this.$el.querySelectorAll(this.dragHandle)].forEach(e=>{e.setAttribute("data-drag-handle",this._uid)}),this.dragCancel&&[...this.$el.querySelectorAll(this.dragCancel)].forEach(e=>{e.setAttribute("data-drag-cancel",this._uid)})},beforeDestroy(){zn(this.domEvents)},methods:{deselect(){this.preventActiveBehavior||(this.active=!1)},move(e){if(!this.stickDrag&&!this.bodyDrag)return;e.stopPropagation();const a=typeof e.pageX<"u"?e.pageX:e.touches[0].pageX,i=typeof e.pageY<"u"?e.pageY:e.touches[0].pageY,{dimensionsBeforeMove:c}=this,n={x:(c.pointerX-a)/this.parentScaleX,y:(c.pointerY-i)/this.parentScaleY};if(this.stickDrag&&this.stickMove(n),this.bodyDrag){if(this.axis==="x")n.y=0;else if(this.axis==="y")n.x=0;else if(this.axis==="none")return;this.bodyMove(n)}},up(e){this.stickDrag?this.stickUp(e):this.bodyDrag&&this.bodyUp(e)},bodyDown(e){const{target:a,button:i}=e;if(this.preventActiveBehavior||(this.active=!0),i&&i!==0||(this.$emit("clicked",e),!this.active)||this.dragHandle&&a.getAttribute("data-drag-handle")!==this._uid.toString()||this.dragCancel&&a.getAttribute("data-drag-cancel")===this._uid.toString())return;typeof e.stopPropagation<"u"&&e.stopPropagation(),typeof e.preventDefault<"u"&&e.preventDefault(),this.isDraggable&&(this.bodyDrag=!0);const c=typeof e.pageX<"u"?e.pageX:e.touches[0].pageX,n=typeof e.pageY<"u"?e.pageY:e.touches[0].pageY;this.saveDimensionsBeforeMove({pointerX:c,pointerY:n}),this.parentLimitation&&(this.limits=this.calcDragLimitation())},bodyMove(e){const{dimensionsBeforeMove:a,parentWidth:i,parentHeight:c,gridX:n,gridY:t,width:o,height:p}=this;let u=a.top-e.y,m=a.bottom+e.y,d=a.left-e.x,r=a.right+e.x;if(this.snapToGrid){let S=!0,h=!0,y=u-Math.floor(u/t)*t,V=c-m-Math.floor((c-m)/t)*t,g=d-Math.floor(d/n)*n,w=i-r-Math.floor((i-r)/n)*n;y>t/2&&(y-=t),V>t/2&&(V-=t),g>n/2&&(g-=n),w>n/2&&(w-=n),Math.abs(V)<Math.abs(y)&&(S=!1),Math.abs(w)<Math.abs(g)&&(h=!1),u-=S?y:V,m=c-p-u,d-=h?g:w,r=i-o-d}({newLeft:this.left,newRight:this.right,newTop:this.top,newBottom:this.bottom}=this.rectCorrectionByLimit({newLeft:d,newRight:r,newTop:u,newBottom:m})),this.$emit("dragging",this.rect)},bodyUp(){this.bodyDrag=!1,this.$emit("dragging",this.rect),this.$emit("dragstop",this.rect),this.dimensionsBeforeMove={pointerX:0,pointerY:0,x:0,y:0,w:0,h:0},this.limits={left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}}},stickDown(e,a,i=!1){if((!this.isResizable||!this.active)&&!i)return;this.stickDrag=!0;const c=typeof a.pageX<"u"?a.pageX:a.touches[0].pageX,n=typeof a.pageY<"u"?a.pageY:a.touches[0].pageY;this.saveDimensionsBeforeMove({pointerX:c,pointerY:n}),this.currentStick=e,this.limits=this.calcResizeLimits()},saveDimensionsBeforeMove({pointerX:e,pointerY:a}){this.dimensionsBeforeMove.pointerX=e,this.dimensionsBeforeMove.pointerY=a,this.dimensionsBeforeMove.left=this.left,this.dimensionsBeforeMove.right=this.right,this.dimensionsBeforeMove.top=this.top,this.dimensionsBeforeMove.bottom=this.bottom,this.dimensionsBeforeMove.width=this.width,this.dimensionsBeforeMove.height=this.height,this.aspectFactor=this.width/this.height},stickMove(e){const{currentStick:a,dimensionsBeforeMove:i,gridY:c,gridX:n,snapToGrid:t,parentHeight:o,parentWidth:p}=this;let u=i.top,m=i.bottom,d=i.left,r=i.right;switch(a[0]){case"b":m=i.bottom+e.y,t&&(m=o-Math.round((o-m)/c)*c);break;case"t":u=i.top-e.y,t&&(u=Math.round(u/c)*c);break}switch(a[1]){case"r":r=i.right+e.x,t&&(r=p-Math.round((p-r)/n)*n);break;case"l":d=i.left-e.x,t&&(d=Math.round(d/n)*n);break}({newLeft:d,newRight:r,newTop:u,newBottom:m}=this.rectCorrectionByLimit({newLeft:d,newRight:r,newTop:u,newBottom:m})),this.aspectRatio&&({newLeft:d,newRight:r,newTop:u,newBottom:m}=this.rectCorrectionByAspectRatio({newLeft:d,newRight:r,newTop:u,newBottom:m})),this.left=d,this.right=r,this.top=u,this.bottom=m,this.$emit("resizing",this.rect)},stickUp(){this.stickDrag=!1,this.dimensionsBeforeMove={pointerX:0,pointerY:0,x:0,y:0,w:0,h:0},this.limits={left:{min:null,max:null},right:{min:null,max:null},top:{min:null,max:null},bottom:{min:null,max:null}},this.$emit("resizing",this.rect),this.$emit("resizestop",this.rect)},calcDragLimitation(){const{parentWidth:e,parentHeight:a}=this;return{left:{min:0,max:e-this.width},right:{min:0,max:e-this.width},top:{min:0,max:a-this.height},bottom:{min:0,max:a-this.height}}},calcResizeLimits(){const{aspectFactor:e,width:a,height:i,bottom:c,top:n,left:t,right:o}=this;let{minh:p,minw:u}=this;const m=this.parentLimitation?0:null;this.aspectRatio&&(u/p>e?p=u/e:u=e*p);const d={left:{min:m,max:t+(a-u)},right:{min:m,max:o+(a-u)},top:{min:m,max:n+(i-p)},bottom:{min:m,max:c+(i-p)}};if(this.aspectRatio){const r={left:{min:t-Math.min(n,c)*e*2,max:t+(i-p)/2*e*2},right:{min:o-Math.min(n,c)*e*2,max:o+(i-p)/2*e*2},top:{min:n-Math.min(t,o)/e*2,max:n+(a-u)/2/e*2},bottom:{min:c-Math.min(t,o)/e*2,max:c+(a-u)/2/e*2}};this.currentStick[0]==="m"?(d.left={min:Math.max(d.left.min,r.left.min),max:Math.min(d.left.max,r.left.max)},d.right={min:Math.max(d.right.min,r.right.min),max:Math.min(d.right.max,r.right.max)}):this.currentStick[1]==="m"&&(d.top={min:Math.max(d.top.min,r.top.min),max:Math.min(d.top.max,r.top.max)},d.bottom={min:Math.max(d.bottom.min,r.bottom.min),max:Math.min(d.bottom.max,r.bottom.max)})}return d},sideCorrectionByLimit(e,a){let i=a;return e.min!==null&&a<e.min?i=e.min:e.max!==null&&e.max<a&&(i=e.max),i},rectCorrectionByLimit(e){const{limits:a}=this;let{newRight:i,newLeft:c,newBottom:n,newTop:t}=e;return c=this.sideCorrectionByLimit(a.left,c),i=this.sideCorrectionByLimit(a.right,i),t=this.sideCorrectionByLimit(a.top,t),n=this.sideCorrectionByLimit(a.bottom,n),{newLeft:c,newRight:i,newTop:t,newBottom:n}},rectCorrectionByAspectRatio(e){let{newLeft:a,newRight:i,newTop:c,newBottom:n}=e;const{parentWidth:t,parentHeight:o,currentStick:p,aspectFactor:u,dimensionsBeforeMove:m}=this;let d=t-a-i,r=o-c-n;if(p[1]==="m"){const S=r-m.height;a-=S*u/2,i-=S*u/2}else if(p[0]==="m"){const S=d-m.width;c-=S/u/2,n-=S/u/2}else d/r>u?(d=u*r,p[1]==="l"?a=t-i-d:i=t-a-d):(r=d/u,p[0]==="t"?c=o-n-r:n=o-c-r);return{newLeft:a,newRight:i,newTop:c,newBottom:n}}},computed:{positionStyle(){return{top:this.top+"px",left:this.left+"px",zIndex:this.zIndex}},sizeStyle(){return{width:this.w=="auto"?"auto":this.width+"px",height:this.h=="auto"?"auto":this.height+"px"}},vdrStick(){return e=>{const a={width:`${this.stickSize/this.parentScaleX}px`,height:`${this.stickSize/this.parentScaleY}px`};return a[Vt.y[e[0]]]=`${this.stickSize/this.parentScaleX/-2}px`,a[Vt.x[e[1]]]=`${this.stickSize/this.parentScaleX/-2}px`,a}},width(){return this.parentWidth-this.left-this.right},height(){return this.parentHeight-this.top-this.bottom},rect(){return{left:Math.round(this.left),top:Math.round(this.top),width:Math.round(this.width),height:Math.round(this.height)}}},watch:{active(e){e?this.$emit("activated"):this.$emit("deactivated")},isActive:{immediate:!0,handler(e){this.active=e}},z:{immediate:!0,handler(e){(e>=0||e==="auto")&&(this.zIndex=e)}},x:{handler(e,a){if(this.stickDrag||this.bodyDrag||e===this.left)return;const i=a-e;this.bodyDown({pageX:this.left,pageY:this.top}),this.bodyMove({x:i,y:0}),this.$nextTick(()=>{this.bodyUp()})}},y:{handler(e,a){if(this.stickDrag||this.bodyDrag||e===this.top)return;const i=a-e;this.bodyDown({pageX:this.left,pageY:this.top}),this.bodyMove({x:0,y:i}),this.$nextTick(()=>{this.bodyUp()})}},w:{handler(e,a){if(this.stickDrag||this.bodyDrag||e===this.width)return;const i="mr",c=a-e;this.stickDown(i,{pageX:this.right,pageY:this.top+this.height/2},!0),this.stickMove({x:c,y:0}),this.$nextTick(()=>{this.stickUp()})}},h:{handler(e,a){if(this.stickDrag||this.bodyDrag||e===this.height)return;const i="bm",c=a-e;this.stickDown(i,{pageX:this.left+this.width/2,pageY:this.bottom},!0),this.stickMove({x:0,y:c}),this.$nextTick(()=>{this.stickUp()})}},parentW(e){this.right=e-this.width-this.left,this.parentWidth=e},parentH(e){this.bottom=e-this.height-this.top,this.parentHeight=e}}},An=["onMousedown","onTouchstart"];function On(e,a,i,c,n,t){return f(),M("div",{class:ke(["vdr",`${e.active||e.isActive?"active":"inactive"} ${e.contentClass?e.contentClass:""}`]),style:ue(e.positionStyle),onMousedown:a[0]||(a[0]=o=>e.bodyDown(o)),onTouchstart:a[1]||(a[1]=o=>e.bodyDown(o)),onTouchend:a[2]||(a[2]=o=>e.up(o))},[b("div",{style:ue(e.sizeStyle),class:"content-container",ref:"container"},[Ne(e.$slots,"default")],4),(f(!0),M(le,null,re(e.sticks,o=>(f(),M("div",{class:ke(["vdr-stick",["vdr-stick-"+o,e.isResizable?"":"not-resizable"]]),onMousedown:ie(p=>e.stickDown(o,p),["stop","prevent"]),onTouchstart:ie(p=>e.stickDown(o,p),["stop","prevent"]),style:ue(e.vdrStick(o))},null,46,An))),256))],38)}const Ht=pe(Pn,[["render",On]]);function st(e){st.installed||(st.installed=!0,e.component("vue-drag-resize",Ht))}const qn={install:st};let je=null;typeof window<"u"?je=window.Vue:typeof global<"u"&&(je=global.Vue);je&&je.use(qn);const Hn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Yn=b("path",{fill:"currentColor",d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4"},null,-1),Fn=[Yn];function Wn(e,a){return f(),M("svg",Hn,[...Fn])}const Yt={name:"ant-design-right-outlined",render:Wn},Xn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Gn=b("path",{fill:"currentColor","fill-rule":"evenodd",d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.1.1 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.12.12 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.1.1 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926L224.297 857.629c-.04.041-.06.052-.083.059a.12.12 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.1.1 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512L166.371 224.297c-.041-.04-.052-.06-.059-.083a.12.12 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.1.1 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.12.12 0 0 1 .07 0Z"},null,-1),Jn=[Gn];function Kn(e,a){return f(),M("svg",Xn,[...Jn])}const mt={name:"ant-design-close-outlined",render:Kn},Zn={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Qn=b("path",{fill:"currentColor",d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6"},null,-1),ea=[Qn];function ta(e,a){return f(),M("svg",Zn,[...ea])}const Ft={name:"ant-design-left-outlined",render:ta},oa={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},na=b("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372c0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884m288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372c0 89-31.3 170.8-83.5 234.8"},null,-1),aa=[na];function la(e,a){return f(),M("svg",oa,[...aa])}const sa={name:"ant-design-stop-outlined",render:la},me=ko("workflow",()=>{const e=$(),a=$(),i=$(),c=$([]);function n(u){e.value=u}function t(u){a.value=u}async function o(u){i.value=u;const{data:m,error:d}=await Yo({groupName:u});d||(c.value=m.map(r=>({id:r.id,jobName:r.jobName})))}function p(){e.value=void 0,a.value=void 0,i.value=void 0,c.value=[]}return{id:e,type:a,groupName:i,jobList:c,setJobList:o,setType:t,setId:n,clear:p}}),ia={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},ra=b("path",{fill:"currentColor",d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9m67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32"},null,-1),da=[ra];function ua(e,a){return f(),M("svg",ia,[...da])}const ca={name:"ant-design-edit-outlined",render:ua},pa={class:"flex items-center"},Ke=W({name:"EditableInput",__name:"editable-input",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=$(),t=$(),o=$(!1);G(()=>i.modelValue,m=>{t.value=m},{immediate:!0});const p=()=>{o.value=!0,ce(()=>{var m;(m=n.value)==null||m.focus()})},u=()=>{c("update:modelValue",t.value),o.value=!1};return(m,d)=>{const r=ve,S=ca,h=ae,y=Ae;return o.value?(f(),E(r,{key:0,ref_key:"inputRef",ref:n,value:t.value,"onUpdate:value":d[0]||(d[0]=V=>t.value=V),type:"text",onBlur:u},null,8,["value"])):(f(),E(y,{key:1},{default:s(()=>[b("span",pa,[U(I(t.value)+" ",1),l(h,{text:"",type:"info",class:"m-l-6px",onClick:p},{icon:s(()=>[l(S,{class:"text-icon"})]),_:1})])]),_:1}))}}}),ma={class:"w-460px flex-center"},fa=W({name:"TaskDrawer",__name:"task-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1},len:{default:0}},emits:["update:open","save"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=$(!1),o=$({}),p=$([]);G(()=>n.jobList,h=>{p.value=h},{immediate:!0}),G(()=>i.open,h=>{t.value=h},{immediate:!0}),G(()=>i.modelValue,h=>{o.value=h},{immediate:!0});const u=$(),m=()=>{c("update:open",!1),t.value=!1},d=()=>{var h;(h=u.value)==null||h.validate(y=>{y||(m(),c("save",o.value))}).catch(()=>{var y;return(y=window.$message)==null?void 0:y.warning("请检查表单信息")})},r={failStrategy:[{required:!0,message:"请选择失败策略"}],workflowNodeStatus:[{required:!0,message:"请选择工作流状态"}],jobTask:{jobId:[{required:!0,message:"请选择任务"}]}},S=(h,y)=>{o.value.jobTask.jobName=y.label};return(h,y)=>{const V=Ce,g=Oe,w=Ge,z=qe,P=Xe,L=He,H=ae,_=Ye,B=Fe;return f(),E(B,{show:t.value,"onUpdate:show":y[5]||(y[5]=D=>t.value=D),"display-directive":"if",width:500,onAfterLeave:m},{default:s(()=>[l(_,null,{header:s(()=>[b("div",ma,[l(Ke,{modelValue:o.value.nodeName,"onUpdate:modelValue":y[0]||(y[0]=D=>o.value.nodeName=D),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),l(V,{value:o.value.priorityLevel,"onUpdate:value":y[1]||(y[1]=D=>o.value.priorityLevel=D),class:"max-w-110px",options:Array(h.len).fill(0).map((D,N)=>({label:"优先级 "+(N+1),value:N+1}))},null,8,["value","options"])])]),footer:s(()=>[l(H,{type:"primary",onClick:d},{default:s(()=>[U("保存")]),_:1}),l(H,{class:"ml-12px",onClick:m},{default:s(()=>[U("取消")]),_:1})]),default:s(()=>[l(L,{ref_key:"formRef",ref:u,model:o.value,rules:r,"label-align":"left","label-width":"100px"},{default:s(()=>[l(g,{path:"jobTask.jobId",label:"所属任务",placeholder:"请选择任务"},{default:s(()=>[l(V,{value:o.value.jobTask.jobId,"onUpdate:value":[y[2]||(y[2]=D=>o.value.jobTask.jobId=D),S],filterable:"",options:p.value.map(D=>({label:D.jobName,value:D.id}))},null,8,["value","options"])]),_:1}),l(g,{path:"failStrategy",label:"失败策略"},{default:s(()=>[l(P,{value:o.value.failStrategy,"onUpdate:value":y[3]||(y[3]=D=>o.value.failStrategy=D)},{default:s(()=>[l(z,null,{default:s(()=>[(f(!0),M(le,null,re(v(No),(D,N)=>(f(),E(w,{key:N,label:v(j)(D.label),value:D.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l(g,{path:"workflowNodeStatus",label:"节点状态"},{default:s(()=>[l(P,{value:o.value.workflowNodeStatus,"onUpdate:value":y[4]||(y[4]=D=>o.value.workflowNodeStatus=D)},{default:s(()=>[l(z,null,{default:s(()=>[(f(!0),M(le,null,re(v(ut),(D,N)=>(f(),E(w,{key:N,label:v(j)(D.label),value:D.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),va=W({name:"TaskDetail",__name:"task-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=$(!1);G(()=>i.open,u=>{t.value=u},{immediate:!0});const o=()=>{c("update:open",!1)},p=u=>{var d;return(d=n.jobList.find(r=>r.id===u))==null?void 0:d.jobName};return(u,m)=>{const d=$e,r=xe,S=Re;return f(),E(S,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=h=>t.value=h),title:"任务详情",width:["500px","90%"],onAfterLeave:o},{default:s(()=>[l(r,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:s(()=>[l(d,{label:"节点名称"},{default:s(()=>[U(I(u.modelValue.nodeName),1)]),_:1}),l(d,{label:"任务 ID"},{default:s(()=>{var h;return[U(I((h=u.modelValue.jobTask)==null?void 0:h.jobId),1)]}),_:1}),l(d,{label:"任务名称"},{default:s(()=>{var h;return[U(I(p((h=u.modelValue.jobTask)==null?void 0:h.jobId)),1)]}),_:1}),l(d,{label:"失败策略"},{default:s(()=>[U(I(v(j)(v(Dt)[u.modelValue.failStrategy])),1)]),_:1}),l(d,{label:"工作流状态"},{default:s(()=>[U(I(v(j)(v(It)[u.modelValue.workflowNodeStatus])),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ha=W({name:"FlowLogDrawer",__name:"flow-log-drawer",props:$o({title:{default:j("workflow.node.log.title")},taskData:{}},{show:{type:Boolean,default:!0},showModifiers:{}}),emits:["update:show"],setup(e){const a=at(e,"show");return(i,c)=>{const n=Go;return f(),E(n,{show:a.value,"onUpdate:show":c[0]||(c[0]=t=>a.value=t),title:i.title,"task-data":i.taskData},null,8,["show","title","task-data"])}}}),_a=e=>(Te("data-v-e19caaf2"),e=e(),De(),e),ga=_a(()=>b("span",null,"任务项列表",-1)),ba=W({name:"DetailCard",__name:"detail-card",props:{id:{default:void 0},ids:{default:()=>[]},show:{type:Boolean,default:!1}},emits:["update:show"],setup(e,{emit:a}){jo.registerLanguage("json",Eo);const i=e,c=a,n=Rt(),t=me(),o=$(!1),p=$(!1),u=$(!1),m=$(1),d=$({}),r=$({page:1,pageCount:0,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20,25,30],onUpdatePage:async _=>{r.value.page=_;const B=i.ids[m.value-1];y(B)},onUpdatePageSize:async _=>{r.value.pageSize=_;const B=i.ids[m.value-1];y(B)}});G(()=>i.show,_=>{o.value=_,_&&g()},{immediate:!0});const S=()=>{c("update:show",!1)};async function h(_){u.value=!0;const{data:B,error:D}=await Fo(_);D||(d.value=B,u.value=!1)}async function y(_){u.value=!0;const{data:B,error:D}=await zo(_);D||(d.value=B,u.value=!1)}const V=$([]);function g(){V.value=i.ids,ce(()=>{i.ids.length>0?y(i.ids[0]):i.id&&(V.value=[d.value.taskBatchId],h(i.id))})}const w=$({}),z=_=>{w.value=_,p.value=!0},P=async()=>{var B;const{error:_}=await Ao(t.id,d.value.workflowNodeId);_||(B=window.$message)==null||B.success("执行重试成功")};function L(_){return{color:`${_}18`,textColor:_,borderColor:`${_}58`}}const H=_=>{m.value=_;const B=i.ids[_-1];y(B)};return(_,B)=>{const D=$e,N=xe,T=Ut,k=Vo,C=Po,F=So,ne=Xo,A=Re,q=ha;return f(),M(le,null,[l(A,{modelValue:o.value,"onUpdate:modelValue":B[2]||(B[2]=x=>o.value=x),title:"任务批次详情",width:["800px","90%"],"onUpdate:show":S},xo({default:s(()=>[V.value&&V.value.length>0?(f(),E(F,{key:0,value:m.value,"onUpdate:value":B[0]||(B[0]=x=>m.value=x),type:"segment",animated:""},{default:s(()=>[(f(!0),M(le,null,re(V.value,(x,X)=>(f(),E(k,{key:X,name:X+1,tab:x},{default:s(()=>[l(F,{class:"detail-tabs",type:"segment",animated:""},{default:s(()=>[l(k,{name:"info",tab:v(j)("page.log.info")},{default:s(()=>[l(T,{show:u.value},{default:s(()=>[l(N,{class:"pt-12px","label-placement":"left",bordered:"",column:2},{default:s(()=>[l(D,{label:v(j)("page.jobBatch.groupName")},{default:s(()=>{var K;return[U(I((K=d.value)==null?void 0:K.groupName),1)]}),_:1},8,["label"]),l(D,{label:v(j)("page.jobBatch.jobName")},{default:s(()=>{var K;return[U(I((K=d.value)==null?void 0:K.jobName),1)]}),_:1},8,["label"]),l(D,{label:v(j)("page.jobBatch.taskBatchStatus")},{default:s(()=>[v(Be)(d.value.taskBatchStatus)?(f(),E(v(Le),{key:0,color:L(v(te)[d.value.taskBatchStatus].color)},{default:s(()=>[U(I(v(te)[d.value.taskBatchStatus].title),1)]),_:1},8,["color"])):R("",!0),v(Be)(d.value.jobStatus)?(f(),E(v(Le),{key:1,color:L(v(Nt)[d.value.jobStatus].color)},{default:s(()=>[U(I(v(j)(v(Nt)[d.value.jobStatus].name)),1)]),_:1},8,["color"])):R("",!0)]),_:1},8,["label"]),l(D,{label:v(j)("page.jobBatch.executionAt")},{default:s(()=>{var K;return[U(I((K=d.value)==null?void 0:K.executionAt),1)]}),_:1},8,["label"]),l(D,{label:v(j)("page.jobBatch.operationReason")},{default:s(()=>[v(Be)(d.value.operationReason)?(f(),E(v(Le),{key:0,color:L(v($t)[d.value.operationReason].color)},{default:s(()=>[U(I(v(j)(v($t)[d.value.operationReason].name)),1)]),_:1},8,["color"])):R("",!0)]),_:1},8,["label"]),v(n).default?R("",!0):(f(),E(D,{key:0,label:v(j)("page.jobBatch.executorType")},{default:s(()=>[v(Be)(d.value.executorType)?(f(),E(v(Le),{key:0,color:L(v(xt)[d.value.executorType].color)},{default:s(()=>[U(I(v(j)(v(xt)[d.value.executorType].name)),1)]),_:1},8,["color"])):R("",!0)]),_:1},8,["label"])),l(D,{label:v(j)("page.jobBatch.executorInfo"),span:2},{default:s(()=>{var K;return[U(I((K=d.value)==null?void 0:K.executorInfo),1)]}),_:1},8,["label"]),l(D,{label:v(j)("common.createDt"),span:2},{default:s(()=>{var K;return[U(I((K=d.value)==null?void 0:K.createDt),1)]}),_:1},8,["label"])]),_:1})]),_:1},8,["show"]),Ne(_.$slots,"default",{},void 0,!0)]),_:3},8,["tab"]),l(k,{name:"task",disabled:d.value.taskBatchStatus===99},{tab:s(()=>[ga]),default:s(()=>[l(C,{"row-data":d.value,onShowLog:z,onRetry:P},null,8,["row-data"])]),_:1},8,["disabled"])]),_:3})]),_:2},1032,["name","tab"]))),128))]),_:3},8,["value"])):R("",!0)]),_:2},[_.ids&&_.ids.length>1?{name:"footer",fn:s(()=>[l(ne,{page:m.value,"onUpdate:page":[B[1]||(B[1]=x=>m.value=x),H],class:"text-center","page-size":1,"page-count":_.ids.length},null,8,["page","page-count"])]),key:"0"}:void 0]),1032,["modelValue"]),l(q,{show:p.value,"onUpdate:show":B[3]||(B[3]=x=>p.value=x),title:"日志详情","task-data":w.value},null,8,["show","task-data"])],64)}}}),ft=pe(ba,[["__scopeId","data-v-e19caaf2"]]),ya={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},wa=b("path",{fill:"currentColor",d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8M872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1),ka=[wa];function Na(e,a){return f(),M("svg",ya,[...ka])}const $a={name:"ant-design-swap-outlined",render:Na},xa={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Sa=b("path",{fill:"currentColor",d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.7 160.7 0 0 0 0-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120s-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3c0 66.2 53.8 120 120 120s120-53.8 120-120s-53.8-120-120-120m0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52s-52-23.3-52-52s23.3-52 52-52M312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88s-39.5 88-88 88m440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52s52 23.3 52 52s-23.3 52-52 52"},null,-1),Va=[Sa];function Ba(e,a){return f(),M("svg",xa,[...Va])}const Ca={name:"ant-design-share-alt-outlined",render:Ba},Ta={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Da=b("path",{fill:"currentColor",d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8m0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8M104 228a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0m0 284a56 56 0 1 0 112 0a56 56 0 1 0-112 0"},null,-1),Ia=[Da];function Ra(e,a){return f(),M("svg",Ta,[...Ia])}const Ua={name:"ant-design-unordered-list-outlined",render:Ra},La={class:"add-node-btn-box"},Ma={class:"add-node-btn"},ja={class:"add-node-popover-body"},Ea={class:"icon"},za=W({name:"AddNode",__name:"add-node",props:{modelValue:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=t=>{let o={};t===1?o={nodeName:j("workflow.node.task.nodeName"),nodeType:1,conditionNodes:[{nodeName:j("workflow.node.task.conditionNodes.nodeName"),failStrategy:1,priorityLevel:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}],childNode:i.modelValue}:t===2?o={nodeName:j("workflow.node.condition.nodeName"),nodeType:2,conditionNodes:[{nodeName:`${j("workflow.node.condition.conditionNodes.nodeName")} 1`,priorityLevel:1,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}},{nodeName:j("workflow.node.condition.conditionNodes.otherNodeName"),priorityLevel:2,decision:{expressionType:1,nodeExpression:"#true",logicalCondition:1,defaultDecision:1}}],childNode:i.modelValue}:t===3&&(o={nodeName:j("workflow.node.callback.nodeName"),nodeType:3,conditionNodes:[{nodeName:j("workflow.node.callback.conditionNodes.nodeName"),workflowNodeStatus:1,callback:{webhook:void 0,contentType:void 0,secret:void 0}}],childNode:i.modelValue}),c("update:modelValue",o)};return(t,o)=>{const p=qt,u=ae,m=Ua,d=Ca,r=$a,S=ct;return f(),M("div",La,[b("div",Ma,[t.disabled?R("",!0):(f(),E(S,{key:0,placement:"right-end",trigger:"click","overlay-style":{width:"296px"}},{trigger:s(()=>[l(u,{type:"primary",circle:"",strong:""},{default:s(()=>[l(p)]),_:1})]),default:s(()=>[b("div",ja,[b("ul",Ea,[b("li",null,[l(u,{circle:"",size:"large",onClick:o[0]||(o[0]=h=>n(1))},{default:s(()=>[l(m,{class:"text-20px color-#3296fa"})]),_:1}),b("p",null,I(v(j)("workflow.node.task.nodeName")),1)]),b("li",null,[l(u,{circle:"",size:"large",onClick:o[1]||(o[1]=h=>n(2))},{default:s(()=>[l(d,{class:"text-20px color-#15bc83"})]),_:1}),b("p",null,I(v(j)("workflow.node.condition.nodeName")),1)]),b("li",null,[l(u,{circle:"",size:"large",onClick:o[2]||(o[2]=h=>n(3))},{default:s(()=>[l(r,{class:"text-20px color-#935af6"})]),_:1}),b("p",null,I(v(j)("workflow.node.callback.nodeName")),1)])])])]),_:1}))])])}}}),he=pe(za,[["__scopeId","data-v-f9b0541f"]]),vt=e=>(Te("data-v-eeba2f81"),e=e(),De(),e),Pa={class:"node-wrap"},Aa={class:"branch-box"},Oa={class:"condition-node"},qa={class:"condition-node-box"},Ha={class:"popover"},Ya={class:"popover-item"},Fa={class:"popover-item"},Wa=["onClick"],Xa=["onClick"],Ga={class:"title"},Ja={class:"text color-#3296fa"},Ka={key:0},Za={class:"priority-title"},Qa={class:"content min-h-72px"},el={key:0,class:"placeholder"},tl=vt(()=>b("span",{class:"content_label"},"任务名称: ",-1)),ol=vt(()=>b("span",{class:"content_label"},"失败策略: ",-1)),nl=vt(()=>b("div",null,".........",-1)),al=["onClick"],ll={key:1,class:"top-left-cover-line"},sl={key:2,class:"bottom-left-cover-line"},il={key:3,class:"top-right-cover-line"},rl={key:4,class:"bottom-right-cover-line"},dl=W({name:"TaskNode",__name:"task-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=Bo(),o=$({});G(()=>i.modelValue,k=>{o.value=k},{immediate:!0});const p=()=>{var C;const k=o.value.conditionNodes.length+1;(C=o.value.conditionNodes)==null||C.push({nodeName:`${j("workflow.node.task.name")} ${k}`,priorityLevel:k,failStrategy:1,workflowNodeStatus:1,jobTask:{jobId:void 0}}),c("update:modelValue",o.value)},u=(k,C)=>{k.childNode?u(k.childNode,C):k.childNode=C},m=k=>{var C;o.value.conditionNodes.length===1?(o.value.childNode&&(o.value.conditionNodes[0].childNode?u(o.value.conditionNodes[0].childNode,o.value.childNode):o.value.conditionNodes[0].childNode=o.value.childNode),ce(()=>{c("update:modelValue",o.value.conditionNodes[0].childNode)})):(C=o.value.conditionNodes)==null||C.splice(k,1)},d=(k,C=1)=>{var F;o.value.conditionNodes[k]=o.value.conditionNodes.splice(k+C,1,o.value.conditionNodes[k])[0],(F=o.value.conditionNodes)==null||F.map((ne,A)=>ne.priorityLevel=A+1),c("update:modelValue",o.value)},r=$(0),S=$(!1),h=$({}),y=k=>{const C=o.value.conditionNodes[r.value].priorityLevel,F=k.priorityLevel;o.value.conditionNodes[r.value]=k,C!==F&&d(r.value,F-C),c("update:modelValue",o.value)},V=k=>{i.disabled||(r.value=k,h.value=JSON.parse(JSON.stringify(o.value.conditionNodes[k])),S.value=!0)},g=k=>i.disabled?n.type===2?`node-error node-error-${k.taskBatchStatus&&te[k.taskBatchStatus]?te[k.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover",w=$(),z=$(),P=$(!1),L=$([]),H=(k,C)=>{var F,ne,A,q;z.value=[],n.type===2?((F=k.jobBatchList)==null||F.sort((x,X)=>x.taskBatchStatus-X.taskBatchStatus).forEach(x=>{var X,K;x.id?(X=z.value)==null||X.push(x.id):x.jobId&&(w.value=(K=x.jobId)==null?void 0:K.toString())}),(ne=k.jobTask)!=null&&ne.jobId&&(w.value=(q=(A=k.jobTask)==null?void 0:A.jobId)==null?void 0:q.toString()),P.value=!0):n.type===1?L.value[C]=!0:V(C)},_=async k=>{const{error:C}=await Oo(k.id,n.id);C||t.success("执行重试成功")},B=async k=>{const{error:C}=await qo(k.id,n.id);C||t.success("停止任务成功")},D=k=>k===4||k===5||k===6,N=k=>k===1||k===2,T=k=>D(k)||N(k);return(k,C)=>{const F=ae,ne=zt,A=Lt,q=sa,x=Ft,X=Je,K=mt,Ue=Ae,ht=Yt,Gt=ct,Jt=We,Kt=Ie;return f(),M("div",Pa,[b("div",Aa,[k.disabled?R("",!0):(f(),E(F,{key:0,class:"add-branch",strong:"",type:"success",onClick:p},{default:s(()=>[U(I(v(j)("workflow.node.task.add")),1)]),_:1})),(f(!0),M(le,null,re(o.value.conditionNodes,(Y,se)=>(f(),M("div",{key:se,class:"col-box"},[b("div",Oa,[b("div",qa,[l(Gt,{disabled:v(n).type!==2||!T(Y.taskBatchStatus)},{trigger:s(()=>{var de,_t;return[b("div",{class:ke(["auto-judge cursor-pointer",g(Y)]),onClick:_e=>H(Y,se)},[se!=0?(f(),M("div",{key:0,class:"sort-left",onClick:ie(_e=>d(se,-1),["stop"])},[l(x)],8,Xa)):R("",!0),b("div",Ga,[b("span",Ja,[l(X,{processing:"",dot:"",color:Y.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),U("  "+I(Y.nodeName)+" ",1),Y.id?(f(),M("span",Ka," ("+I(Y.id)+")",1)):R("",!0)]),b("span",Za,I(v(j)("workflow.node.priority"))+I(Y.priorityLevel),1),k.disabled?R("",!0):(f(),E(K,{key:0,class:"close",onClick:ie(_e=>m(se),["stop"])},null,8,["onClick"]))]),b("div",Qa,[(de=Y.jobTask)!=null&&de.jobId?R("",!0):(f(),M("div",el,"请选择任务")),(_t=Y.jobTask)!=null&&_t.jobId?(f(),M(le,{key:1},[b("div",null,[tl,l(Ue,{class:"max-w-123px"},{default:s(()=>{var _e,gt;return[U(I(`${(_e=Y.jobTask)==null?void 0:_e.jobName}(${(gt=Y.jobTask)==null?void 0:gt.jobId})`),1)]}),_:2},1024)]),b("div",null,[ol,U(" "+I(v(j)(v(Dt)[Y.failStrategy])),1)]),nl],64)):R("",!0)]),se!=o.value.conditionNodes.length-1?(f(),M("div",{key:1,class:"sort-right",onClick:ie(_e=>d(se),["stop"])},[l(ht)],8,al)):R("",!0)],10,Wa)]}),default:s(()=>[b("div",Ha,[D(Y.taskBatchStatus)?(f(),E(F,{key:0,text:"",onClick:de=>_(Y)},{default:s(()=>[b("span",Ya,[l(ne,{class:"mb-3px text-24px font-bold"}),U(" "+I(v(j)("common.retry")),1)])]),_:2},1032,["onClick"])):R("",!0),N(Y.taskBatchStatus)&&D(Y.taskBatchStatus)?(f(),E(A,{key:1,vertical:""})):R("",!0),N(Y.taskBatchStatus)?(f(),E(F,{key:2,text:"",onClick:de=>B(Y)},{default:s(()=>[b("span",Fa,[l(q),U(" "+I(v(j)("common.stop")),1)])]),_:2},1032,["onClick"])):R("",!0)])]),_:2},1032,["disabled"]),v(n).type===2&&Y.taskBatchStatus?(f(),E(Kt,{key:0},{trigger:s(()=>[b("div",{class:"task-error-tip text-24px",style:ue({color:v(te)[Y.taskBatchStatus].color})},[l(Jt,{icon:v(te)[Y.taskBatchStatus].icon},null,8,["icon"])],4)]),default:s(()=>[U(" "+I(v(te)[Y.taskBatchStatus].title),1)]),_:2},1024)):R("",!0),l(he,{modelValue:Y.childNode,"onUpdate:modelValue":de=>Y.childNode=de,disabled:k.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),Y.childNode?Ne(k.$slots,"default",{key:0,node:Y},void 0,!0):R("",!0),se==0?(f(),M("div",ll)):R("",!0),se==0?(f(),M("div",sl)):R("",!0),se==o.value.conditionNodes.length-1?(f(),M("div",il)):R("",!0),se==o.value.conditionNodes.length-1?(f(),M("div",rl)):R("",!0),v(n).type!==0?(f(),E(va,{key:5,open:L.value[se],"onUpdate:open":de=>L.value[se]=de,"model-value":o.value.conditionNodes[se]},null,8,["open","onUpdate:open","model-value"])):R("",!0)]))),128))]),o.value.conditionNodes.length>1?(f(),E(he,{key:0,modelValue:o.value.childNode,"onUpdate:modelValue":C[0]||(C[0]=Y=>o.value.childNode=Y),disabled:k.disabled},null,8,["modelValue","disabled"])):R("",!0),v(n).type===0?(f(),E(fa,{key:1,open:S.value,"onUpdate:open":C[1]||(C[1]=Y=>S.value=Y),modelValue:h.value,"onUpdate:modelValue":C[2]||(C[2]=Y=>h.value=Y),len:o.value.conditionNodes.length,"onUpdate:len":C[3]||(C[3]=Y=>o.value.conditionNodes.length=Y),onSave:y},null,8,["open","modelValue","len"])):R("",!0),v(n).type!==0?(f(),E(ft,{key:2,id:w.value,show:P.value,"onUpdate:show":C[4]||(C[4]=Y=>P.value=Y),ids:z.value},null,8,["id","show","ids"])):R("",!0)])}}}),ul=pe(dl,[["__scopeId","data-v-eeba2f81"]]),cl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},pl=b("path",{fill:"currentColor",d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448s448-200.6 448-448S759.4 64 512 64m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372s372 166.6 372 372s-166.6 372-372 372"},null,-1),ml=b("path",{fill:"currentColor",d:"M464 336a48 48 0 1 0 96 0a48 48 0 1 0-96 0m72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8"},null,-1),fl=[pl,ml];function vl(e,a){return f(),M("svg",cl,[...fl])}const hl={name:"ant-design-info-circle-outlined",render:vl},_l=b("div",{class:"h-34px lh-34px"},"(",-1),gl=b("div",{class:"h-34px lh-34px"},")",-1),Wt=W({__name:"dynamic-input",props:{value:{required:!0,default:()=>[]},valueModifiers:{},path:{required:!0},pathModifiers:{}},emits:["update:value","update:path"],setup(e){const a=at(e,"value"),i=at(e,"path"),c=()=>({key:"",value:"",type:"string"}),n=[{trigger:["input","blur"],validator(u,m){return!m&&m!==0?new Error("不能为空"):!0}}],t=[{label:"string",value:"string"},{label:"number",value:"number"},{label:"boolean",value:"boolean"}],o=[{label:"true",value:1},{label:"false",value:0}],p=u=>{a.value[u].type==="string"&&(a.value[u].value=""),a.value[u].type==="boolean"&&(a.value[u].value=0),a.value[u].type==="number"&&(a.value[u].value=0)};return(u,m)=>{const d=ve,r=Jo,S=Pt,h=Mt,y=Ce,V=At,g=Vn;return f(),E(g,{value:a.value,"onUpdate:value":m[5]||(m[5]=w=>a.value=w),"item-style":"margin-bottom: 0;","on-create":c},{default:s(({index:w})=>[l(V,null,{default:s(()=>[l(r,{span:7,"ignore-path-change":"","show-label":!1,rule:n,path:`${i.value}[${w}].key`},{default:s(()=>[l(d,{value:a.value[w].key,"onUpdate:value":z=>a.value[w].key=z,placeholder:"key",onKeydown:m[0]||(m[0]=Ve(ie(()=>{},["prevent"]),["enter"]))},null,8,["value","onUpdate:value"])]),_:2},1032,["path"]),l(S,{span:2,class:"h-34px text-center lh-34px"},{default:s(()=>[U("=")]),_:1}),l(r,{span:7,"ignore-path-change":"","show-label":!1,rule:n,path:`${i.value}[${w}].value`},{default:s(()=>[a.value[w].type==="string"?(f(),E(d,{key:0,value:a.value[w].value,"onUpdate:value":z=>a.value[w].value=z,placeholder:"value",onKeydown:m[1]||(m[1]=Ve(ie(()=>{},["prevent"]),["enter"]))},null,8,["value","onUpdate:value"])):R("",!0),a.value[w].type==="number"?(f(),E(h,{key:1,value:a.value[w].value,"onUpdate:value":z=>a.value[w].value=z,class:"w-full",placeholder:"value",onKeydown:m[2]||(m[2]=Ve(ie(()=>{},["prevent"]),["enter"]))},null,8,["value","onUpdate:value"])):R("",!0),a.value[w].type==="boolean"?(f(),E(y,{key:2,value:a.value[w].value,"onUpdate:value":z=>a.value[w].value=z,class:"w-full",options:o,placeholder:"value",onKeydown:m[3]||(m[3]=Ve(ie(()=>{},["prevent"]),["enter"]))},null,8,["value","onUpdate:value"])):R("",!0)]),_:2},1032,["path"]),l(r,{span:3,class:"ml-12px w-115px","ignore-path-change":"","show-label":!1,path:`${i.value}[${w}].type`},{default:s(()=>[_l,l(y,{value:a.value[w].type,"onUpdate:value":[z=>a.value[w].type=z,z=>p(w)],class:"mx-3px",options:t,placeholder:"字段类型",onKeydown:m[4]||(m[4]=Ve(ie(()=>{},["prevent"]),["enter"]))},null,8,["value","onUpdate:value"]),gl]),_:2},1032,["path"])]),_:2},1024)]),_:1},8,["value"])}}}),bl={class:"w-460px flex-center"},yl=W({name:"BranchDrawer",__name:"branch-drawer",props:{open:{type:Boolean,default:!1},len:{default:0},modelValue:{default:()=>({})}},emits:["update:open","save"],setup(e,{emit:a}){const i=e,c=a,n=$(!1),t=$({decision:{logicalCondition:1,expressionType:1,nodeExpression:"",checkContents:[]}});G(()=>i.open,S=>{n.value=S},{immediate:!0}),G(()=>i.modelValue,S=>{t.value=S},{immediate:!0});const o=$(),p=()=>{c("update:open",!1),n.value=!1},u=()=>{var S;(S=o.value)==null||S.validate(h=>{h||(p(),c("save",t.value))}).catch(()=>{var h;return(h=window.$message)==null?void 0:h.warning("请检查表单信息")})},m=$(""),d=async()=>{var y;if(!((y=t.value.decision)!=null&&y.nodeExpression)){m.value="请填写条件表达式";return}const{error:S,data:h}=await Ho(t.value.decision);if(S){m.value="接口请求失败";return}else if(h.key!==1){m.value=h.value||"请检查条件表达式";return}m.value=""},r={decision:{expressionType:[{required:!0,message:"请选择表达式类型",trigger:"change",type:"number"}],nodeExpression:[{required:!0,message:"请填写条件表达式",trigger:"blur"}]}};return(S,h)=>{const y=Ce,V=Ge,g=qe,w=Xe,z=Oe,P=Ko,L=Wt,H=ae,_=He,B=Ye,D=Fe;return f(),E(D,{show:n.value,"onUpdate:show":h[5]||(h[5]=N=>n.value=N),"display-directive":"if",width:500,onAfterLeave:p},{default:s(()=>[l(B,null,{header:s(()=>[b("div",bl,[l(Ke,{modelValue:t.value.nodeName,"onUpdate:modelValue":h[0]||(h[0]=N=>t.value.nodeName=N),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"]),l(y,{value:t.value.priorityLevel,"onUpdate:value":h[1]||(h[1]=N=>t.value.priorityLevel=N),class:"max-w-110px",options:Array(S.len).fill(0).map((N,T)=>({label:"优先级 "+(T+1),value:T+1}))},null,8,["value","options"])])]),footer:s(()=>[l(H,{type:"primary",onClick:u},{default:s(()=>[U("保存")]),_:1}),l(H,{class:"ml-12px",onClick:p},{default:s(()=>[U("取消")]),_:1})]),default:s(()=>[l(_,{ref_key:"formRef",ref:o,rules:r,model:t.value,"label-align":"left","label-width":"100px"},{default:s(()=>{var N;return[l(z,{path:"decision.expressionType",label:"表达式类型"},{default:s(()=>[l(w,{value:t.value.decision.expressionType,"onUpdate:value":h[2]||(h[2]=T=>t.value.decision.expressionType=T)},{default:s(()=>[l(g,null,{default:s(()=>[(f(!0),M(le,null,re(v(Co),T=>(f(),E(V,{key:T.value,label:T.label,value:T.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l(z,{path:"decision.nodeExpression",label:"条件表达式","validation-status":"error",feedback:m.value},{default:s(()=>[l(P,{modelValue:t.value.decision.nodeExpression,"onUpdate:modelValue":h[3]||(h[3]=T=>t.value.decision.nodeExpression=T),placeholder:"请输入条件表达式"},null,8,["modelValue"])]),_:1},8,["feedback"]),l(z,{path:"decision.checkContents",label:"模拟上下文","show-feedback":((N=t.value.decision)==null?void 0:N.checkContents)&&t.value.decision.checkContents.length===0},{default:s(()=>[l(L,{value:t.value.decision.checkContents,"onUpdate:value":h[4]||(h[4]=T=>t.value.decision.checkContents=T),path:"decision.checkContents"},null,8,["value"])]),_:1},8,["show-feedback"]),l(z,{"show-label":!1,"show-feedback":!1},{default:s(()=>[l(H,{type:"primary",ghost:"",block:"",onClick:d},{default:s(()=>[U("校验条件表达式")]),_:1})]),_:1})]}),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),wl=pe(yl,[["__scopeId","data-v-e7f14d8d"]]),Xt=W({name:"BranchDesc",__name:"branch-desc",props:{modelValue:{default:()=>({})}},setup(e){const a=e,i=$(""),c=$({".cm-line":{fontSize:"18px"},".cm-scroller":{minHeight:"180px",overflowY:"auto",overflowX:"hidden"}}),n=()=>{var h;const t=document.getElementById("branch-desc"),o=t==null?void 0:t.querySelector(".n-descriptions-table"),p=o==null?void 0:o.querySelector("tbody"),u=document.createElement("tr");u.className="n-descriptions-table-row";const m=document.createElement("th");m.className="n-descriptions-table-header",m.innerHTML="条件表达式",m.setAttribute("colspan","4"),u.appendChild(m),p==null||p.insertBefore(u,p==null?void 0:p.childNodes[4]);const r=p.getElementsByClassName("n-descriptions-table-row")[3];(h=r.querySelector(".n-descriptions-table-header"))==null||h.remove();const S=r.querySelector(".n-descriptions-table-content");S.setAttribute("style","padding: 0"),S==null||S.setAttribute("colspan","4")};return ze(()=>{var t;ce(()=>{n()}),(t=a.modelValue.decision)!=null&&t.nodeExpression&&(i.value=a.modelValue.decision.nodeExpression)}),(t,o)=>{const p=$e,u=xe;return f(),E(u,{id:"branch-desc",column:2,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:s(()=>[l(p,{label:"节点名称",span:2},{default:s(()=>[U(I(t.modelValue.nodeName),1)]),_:1}),l(p,{label:"表达式类型"},{default:s(()=>{var m;return[U(I(v(jt)[(m=t.modelValue.decision)==null?void 0:m.expressionType]),1)]}),_:1}),l(p,{label:"条件表达式",span:2,"content-style":{padding:0}},{default:s(()=>[l(v(Zo),{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=m=>i.value=m),readonly:"",disabled:"",theme:c.value,basic:"",lang:v(Qo)(),extensions:[v(en)]},null,8,["modelValue","theme","lang","extensions"])]),_:1})]),_:1})}}}),kl=W({name:"BranchDetail",__name:"branch-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(e,{emit:a}){const i=e,c=a,n=$(!1),t=()=>{c("update:open",!1)};return G(()=>i.open,o=>{n.value=o},{immediate:!0}),(o,p)=>{const u=Re;return f(),E(u,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=m=>n.value=m),title:"决策详情",width:["500px","90%"],onAfterLeave:t},{default:s(()=>[n.value?(f(),E(Xt,{key:0,"model-value":o.modelValue},null,8,["model-value"])):R("",!0)]),_:1},8,["modelValue"])}}}),Nl=e=>(Te("data-v-61d296a2"),e=e(),De(),e),$l={class:"branch-wrap"},xl={class:"branch-box-wrap"},Sl={class:"branch-box"},Vl={class:"condition-node"},Bl={class:"condition-node-box"},Cl=["onClick"],Tl=["onClick"],Dl={class:"title"},Il={class:"node-title"},Rl={key:0},Ul={class:"priority-title"},Ll={class:"content"},Ml=["innerHTML"],jl={key:1,class:"placeholder"},El=["onClick"],zl={key:1,class:"top-left-cover-line"},Pl={key:2,class:"bottom-left-cover-line"},Al={key:3,class:"top-right-cover-line"},Ol={key:4,class:"bottom-right-cover-line"},ql=Nl(()=>b("div",{class:"header-border"},[b("span",{class:"pl-12px"},"决策节点详情")],-1)),Hl=W({name:"BranchNode",__name:"branch-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=$({});G(()=>i.modelValue,_=>{t.value=_},{immediate:!0});const o=()=>{const _=t.value.conditionNodes.length;t.value.conditionNodes.splice(-1,0,{nodeName:`${j("workflow.node.condition.conditionNodes.nodeName")} ${_}`,priorityLevel:_,decision:{expressionType:1,nodeExpression:void 0,logicalCondition:1,defaultDecision:0}}),t.value.conditionNodes[_].priorityLevel=_+1},p=(_,B)=>{_.childNode?p(_.childNode,B):_.childNode=B},u=_=>{var B;(B=t.value.conditionNodes)==null||B.splice(_,1),t.value.conditionNodes.length===1&&(t.value.childNode&&(t.value.conditionNodes[0].childNode?p(t.value.conditionNodes[0].childNode,t.value.childNode):t.value.conditionNodes[0].childNode=t.value.childNode),ce(()=>{c("update:modelValue",t.value.conditionNodes[0].childNode)}))},m=(_,B=1)=>{var D;t.value.conditionNodes[_]=t.value.conditionNodes.splice(_+B,1,t.value.conditionNodes[_])[0],(D=t.value.conditionNodes)==null||D.map((N,T)=>N.priorityLevel=T+1),c("update:modelValue",t.value)},d=(_,B)=>{const{nodeName:D,decision:N}=_.conditionNodes[B],{expressionType:T,nodeExpression:k}=N;return k?D!==j("workflow.node.condition.conditionNodes.otherNodeName")?`<span class="content_label">${j("workflow.node.condition.conditionNodes.expressionType")}: </span>${jt[T]}
<span class="content_label">${j("workflow.node.condition.conditionNodes.nodeExpression")}: </span><span style="display: inline-block; vertical-align: bottom; width: 120px; overflow: hidden; text-overflow: ellipsis">${k}<span/>`:j("workflow.node.condition.conditionNodes.otherNodeTip"):D===j("workflow.node.condition.conditionNodes.otherNodeName")?j("workflow.node.condition.conditionNodes.otherNodeTip"):null},r=$(0),S=$(!1),h=$([]),y=$({}),V=_=>{const B=t.value.conditionNodes[r.value].priorityLevel,D=_.priorityLevel;t.value.conditionNodes[r.value]=_,B!==D&&m(r.value,D-B),c("update:modelValue",t.value)},g=_=>{!i.disabled&&_!==t.value.conditionNodes.length-1?(r.value=_,y.value=JSON.parse(JSON.stringify(t.value.conditionNodes[_])),S.value=!0):n.type!==0&&(h.value[_]=!0)},w=$([]),z=$(""),P=$([]),L=(_,B)=>{var D;if(P.value=[],_.nodeName!==j("workflow.node.condition.conditionNodes.otherNodeName"))if(n.type===2){if((D=_.jobBatchList)==null||D.forEach(N=>{var T,k;N.id?(T=P.value)==null||T.push(N.id):N.jobId&&(z.value=(k=N.jobId)==null?void 0:k.toString())}),P.value.length===0){h.value[B]=!0;return}w.value[B]=!0}else n.type===1?h.value[B]=!0:g(B)},H=_=>i.disabled?n.type===2?_.nodeName===j("workflow.node.condition.conditionNodes.otherNodeName")?`node-disabled node-error node-error-${_.taskBatchStatus?te[_.taskBatchStatus].name:"default"}`:`node-error node-error-${_.taskBatchStatus?te[_.taskBatchStatus].name:"default"}`:_.nodeName===j("workflow.node.condition.conditionNodes.otherNodeName")?"node-disabled":"node-error":_.nodeName===j("workflow.node.condition.conditionNodes.otherNodeName")?"node-disabled":"auto-judge-def auto-judge-hover";return(_,B)=>{const D=ae,N=Ft,T=Je,k=hl,C=Ie,F=mt,ne=Yt,A=We;return f(),M("div",$l,[b("div",xl,[b("div",Sl,[_.disabled?R("",!0):(f(),E(D,{key:0,strong:"",type:"success",class:"add-branch",onClick:o},{default:s(()=>[U(I(v(j)("workflow.node.condition.addBranch")),1)]),_:1})),(f(!0),M(le,null,re(t.value.conditionNodes,(q,x)=>(f(),M("div",{key:x,class:"col-box"},[b("div",Vl,[b("div",Bl,[b("div",{class:ke(["auto-judge",H(q)]),onClick:X=>L(q,x)},[x!==0?(f(),M("div",{key:0,class:"sort-left",onClick:ie(X=>m(x,-1),["stop"])},[l(N)],8,Tl)):R("",!0),b("div",Dl,[b("span",Il,[l(T,{dot:"",processing:"",color:"#52c41a"}),U("  "+I(q.nodeName)+" ",1),q.id&&q.nodeName!==v(j)("workflow.node.condition.conditionNodes.otherNodeName")?(f(),M("span",Rl,"  ("+I(q.id)+") ",1)):R("",!0),q.nodeName===v(j)("workflow.node.condition.conditionNodes.otherNodeName")?(f(),E(C,{key:1},{trigger:s(()=>[l(k,{class:"ml-3px text-16px"})]),default:s(()=>[U(" "+I(v(j)("workflow.node.condition.conditionNodes.otherTip")),1)]),_:1})):R("",!0)]),b("span",Ul,I(v(j)("workflow.node.condition.conditionNodes.priority"))+I(q.priorityLevel),1),_.disabled?R("",!0):(f(),E(F,{key:0,class:"close",onClick:ie(X=>u(x),["stop"])},null,8,["onClick"]))]),b("div",Ll,[d(t.value,x)?(f(),M("span",{key:0,innerHTML:d(t.value,x)},null,8,Ml)):(f(),M("span",jl,I(v(j)("workflow.node.condition.conditionNodes.conditionTip")),1))]),x!==t.value.conditionNodes.length-2?(f(),M("div",{key:1,class:"sort-right",onClick:ie(X=>m(x),["stop"])},[l(ne)],8,El)):R("",!0),v(n).type===2&&q.taskBatchStatus?(f(),E(C,{key:2},{trigger:s(()=>[b("div",{class:"error-tip text-24px",style:ue({color:v(te)[q.taskBatchStatus].color})},[l(A,{icon:v(te)[q.taskBatchStatus].icon},null,8,["icon"])],4)]),default:s(()=>[U(" "+I(v(te)[q.taskBatchStatus].title),1)]),_:2},1024)):R("",!0)],10,Cl),l(he,{modelValue:q.childNode,"onUpdate:modelValue":X=>q.childNode=X,disabled:_.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),q.childNode?Ne(_.$slots,"default",{key:0,node:q},void 0,!0):R("",!0),x==0?(f(),M("div",zl)):R("",!0),x==0?(f(),M("div",Pl)):R("",!0),x==t.value.conditionNodes.length-1?(f(),M("div",Al)):R("",!0),x==t.value.conditionNodes.length-1?(f(),M("div",Ol)):R("",!0),l(kl,{open:h.value[x],"onUpdate:open":X=>h.value[x]=X,modelValue:t.value.conditionNodes[x],"onUpdate:modelValue":X=>t.value.conditionNodes[x]=X},null,8,["open","onUpdate:open","modelValue","onUpdate:modelValue"]),l(ft,{id:z.value,show:w.value[x],"onUpdate:show":X=>w.value[x]=X,ids:P.value},{default:s(()=>[ql,l(Xt,{"model-value":t.value.conditionNodes[x]},null,8,["model-value"])]),_:2},1032,["id","show","onUpdate:show","ids"])]))),128))]),l(he,{modelValue:t.value.childNode,"onUpdate:modelValue":B[0]||(B[0]=q=>t.value.childNode=q),disabled:_.disabled},null,8,["modelValue","disabled"])]),l(wl,{open:S.value,"onUpdate:open":B[1]||(B[1]=q=>S.value=q),modelValue:y.value,"onUpdate:modelValue":B[2]||(B[2]=q=>y.value=q),len:t.value.conditionNodes.length,"onUpdate:len":B[3]||(B[3]=q=>t.value.conditionNodes.length=q),onSave:V},null,8,["open","modelValue","len"])])}}}),Yl=pe(Hl,[["__scopeId","data-v-61d296a2"]]),Fl={class:"inline-block",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},Wl=b("path",{fill:"currentColor",d:"M112 476h160v72H112zm320 0h160v72H432zm320 0h160v72H752z"},null,-1),Xl=[Wl];function Gl(e,a){return f(),M("svg",Fl,[...Xl])}const Jl={name:"ant-design-dash-outlined",render:Gl},Kl={class:"w-460px flex-center"},Zl=W({name:"CallbackDrawer",__name:"callback-drawer",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open","save"],setup(e,{emit:a}){const i=e,c=a,n=$(!1),t=$({});G(()=>i.open,d=>{n.value=d},{immediate:!0}),G(()=>i.modelValue,d=>{t.value=d},{immediate:!0});const o=$(),p=()=>{c("update:open",!1),n.value=!1},u=()=>{var d;(d=o.value)==null||d.validate(r=>{r||(p(),c("save",t.value))}).catch(()=>{var r;return(r=window.$message)==null?void 0:r.warning("请检查表单信息")})},m={workflowNodeStatus:[{required:!0,message:"请选择工作流状态",trigger:"change"}],callback:{webhook:[{required:!0,message:"请输入 webhook",trigger:"change"}],contentType:[{required:!0,message:"请选择请求类型",trigger:"change",type:"number"}],secret:[{required:!0,message:"请输入秘钥",trigger:"change"}]}};return(d,r)=>{const S=ve,h=Oe,y=Ce,V=Ge,g=qe,w=Xe,z=He,P=ae,L=Ye,H=Fe;return f(),E(H,{show:n.value,"onUpdate:show":r[5]||(r[5]=_=>n.value=_),"display-directive":"if",width:500,onAfterLeave:p},{default:s(()=>[l(L,null,{header:s(()=>[b("div",Kl,[l(Ke,{modelValue:t.value.nodeName,"onUpdate:modelValue":r[0]||(r[0]=_=>t.value.nodeName=_),class:"mr-16px max-w-320px min-w-320px"},null,8,["modelValue"])])]),footer:s(()=>[l(P,{type:"primary",onClick:u},{default:s(()=>[U("保存")]),_:1}),l(P,{class:"ml-12px",onClick:p},{default:s(()=>[U("取消")]),_:1})]),default:s(()=>[l(z,{ref_key:"formRef",ref:o,model:t.value,rules:m,"label-align":"left","label-width":"100px"},{default:s(()=>[l(h,{path:"callback.webhook",label:"webhook"},{default:s(()=>[l(S,{value:t.value.callback.webhook,"onUpdate:value":r[1]||(r[1]=_=>t.value.callback.webhook=_),placeholder:"请输入 webhook"},null,8,["value"])]),_:1}),l(h,{path:"callback.contentType",label:"请求类型"},{default:s(()=>[l(y,{value:t.value.callback.contentType,"onUpdate:value":r[2]||(r[2]=_=>t.value.callback.contentType=_),options:v(To),placeholder:"请选择请求类型"},null,8,["value","options"])]),_:1}),l(h,{path:"callback.secret",label:"秘钥"},{default:s(()=>[l(S,{value:t.value.callback.secret,"onUpdate:value":r[3]||(r[3]=_=>t.value.callback.secret=_),placeholder:"请输入秘钥"},null,8,["value"])]),_:1}),l(h,{name:"workflowNodeStatus",label:"工作流状态",rules:[{required:!0,message:"请选择工作流状态",trigger:"change"}]},{default:s(()=>[l(w,{value:t.value.workflowNodeStatus,"onUpdate:value":r[4]||(r[4]=_=>t.value.workflowNodeStatus=_)},{default:s(()=>[l(g,null,{default:s(()=>[(f(!0),M(le,null,re(v(ut),(_,B)=>(f(),E(V,{key:B,label:v(j)(_.label),value:_.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])}}}),Ql=W({name:"CallbackDetail",__name:"callback-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(e,{emit:a}){const i=e,c=a,n=$(!1);G(()=>i.open,o=>{n.value=o},{immediate:!0});const t=()=>{c("update:open",!1)};return(o,p)=>{const u=$e,m=xe,d=Re;return f(),E(d,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=r=>n.value=r),title:"回调详情",width:["500px","90%"],onAfterLeave:t},{default:s(()=>[l(m,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:s(()=>[l(u,{label:"节点名称"},{default:s(()=>[U(I(o.modelValue.nodeName),1)]),_:1}),l(u,{label:"webhook"},{default:s(()=>{var r;return[U(I((r=o.modelValue.callback)==null?void 0:r.webhook),1)]}),_:1}),l(u,{label:"请求类型"},{default:s(()=>{var r;return[U(I(v(lt)[(r=o.modelValue.callback)==null?void 0:r.contentType]),1)]}),_:1}),l(u,{label:"密钥"},{default:s(()=>{var r;return[U(I((r=o.modelValue.callback)==null?void 0:r.secret),1)]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ze=e=>(Te("data-v-84fc8365"),e=e(),De(),e),es={class:"node-wrap"},ts={class:"branch-box"},os={class:"condition-node min-h-230px"},ns={class:"condition-node-box pt-0px"},as={class:"popover"},ls={class:"popover-item"},ss={class:"popover-item"},is=Ze(()=>b("span",null,"忽略",-1)),rs=["onClick"],ds={class:"title"},us={class:"text text-#935af6"},cs={key:0},ps={class:"content min-h-81px"},ms={key:0,class:"placeholder"},fs={class:"flex justify-between"},vs=Ze(()=>b("span",{class:"content_label"},"Webhook:",-1)),hs={class:"content_label"},_s=Ze(()=>b("div",null,".........",-1)),gs={key:1,class:"top-left-cover-line"},bs={key:2,class:"bottom-left-cover-line"},ys={key:3,class:"top-right-cover-line"},ws={key:4,class:"bottom-right-cover-line"},ks=Ze(()=>b("div",{class:"header-border"},[b("span",{class:"pl-18px"},"回调节点详情")],-1)),Ns=W({name:"CallbackNode",__name:"callback-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=$({});G(()=>i.modelValue,P=>{t.value=P},{immediate:!0});const o=(P,L)=>{P.childNode?o(P.childNode,L):P.childNode=L},p=()=>{t.value.childNode&&(t.value.conditionNodes[0].childNode?o(t.value.conditionNodes[0].childNode,t.value.childNode):t.value.conditionNodes[0].childNode=t.value.childNode),ce(()=>{c("update:modelValue",t.value.conditionNodes[0].childNode)})},u=$(0),m=$(!1),d=$(!1),r=$({}),S=P=>{t.value.conditionNodes[u.value]=P,c("update:modelValue",t.value)},h=P=>{n.type===0?(u.value=P,r.value=JSON.parse(JSON.stringify(t.value.conditionNodes[P])),m.value=!0):d.value=!0},y=$(!1),V=$(""),g=$([]),w=(P,L)=>{var H;if(g.value=[],n.type===2){if((H=P.jobBatchList)==null||H.forEach(_=>{var B,D;_.id?(B=g.value)==null||B.push(_.id):_.jobId&&(V.value=(D=_.jobId)==null?void 0:D.toString())}),g.value.length===0){d.value=!0;return}y.value=!0}else n.type===1?d.value=!0:h(L)},z=P=>i.disabled?n.type===2?`node-error node-error-${P.taskBatchStatus?te[P.taskBatchStatus].name:"default"}`:"node-error":"auto-judge-def auto-judge-hover";return(P,L)=>{const H=zt,_=ae,B=Lt,D=Jl,N=Je,T=mt,k=Ae,C=We,F=Ie,ne=ct,A=$e,q=xe;return f(),M("div",es,[b("div",ts,[(f(!0),M(le,null,re(t.value.conditionNodes,(x,X)=>(f(),M("div",{key:X,class:"col-box"},[b("div",os,[b("div",ns,[l(ne,{disabled:v(n).type!==2||!0},{trigger:s(()=>{var K,Ue;return[b("div",{class:ke(["auto-judge",z(x)]),onClick:ht=>w(x,X)},[b("div",ds,[b("span",us,[l(N,{processing:"",dot:"",color:x.workflowNodeStatus===1?"#52c41a":"#ff4d4f"},null,8,["color"]),U("  "+I(x.nodeName)+" ",1),x.id?(f(),M("span",cs," ("+I(x.id)+")",1)):R("",!0)]),P.disabled?R("",!0):(f(),E(T,{key:0,class:"close",onClick:ie(p,["stop"])}))]),b("div",ps,[(K=x.callback)!=null&&K.webhook?R("",!0):(f(),M("div",ms,I(v(j)("workflow.node.callback.conditionNodes.webhookTip")),1)),(Ue=x.callback)!=null&&Ue.webhook?(f(),M(le,{key:1},[b("div",fs,[vs,l(k,{class:"w-116px"},{default:s(()=>[U(I(x.callback.webhook),1)]),_:2},1024)]),b("div",null,[b("span",hs,I(v(j)("workflow.node.callback.conditionNodes.contentType"))+": ",1),U(" "+I(v(lt)[x.callback.contentType]),1)]),_s],64)):R("",!0)]),v(n).type===2&&x.taskBatchStatus?(f(),E(F,{key:0},{trigger:s(()=>[b("div",{class:"error-tip text-24px",style:ue({color:v(te)[x.taskBatchStatus].color})},[l(C,{icon:v(te)[x.taskBatchStatus].icon},null,8,["icon"])],4)]),default:s(()=>[U(" "+I(v(te)[x.taskBatchStatus].title),1)]),_:2},1024)):R("",!0)],10,rs)]}),default:s(()=>[b("div",as,[l(_,{text:""},{default:s(()=>[b("span",ls,[l(H,{class:"mb-3px text-24px font-bold"}),U(" "+I(v(j)("common.retry")),1)])]),_:1}),l(B,{vertical:""}),l(_,{text:""},{default:s(()=>[b("span",ss,[l(D,{class:"mb-3px text-24px font-bold"}),is])]),_:1})])]),_:2},1032,["disabled"]),l(he,{modelValue:x.childNode,"onUpdate:modelValue":K=>x.childNode=K,disabled:P.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])]),x.childNode?Ne(P.$slots,"default",{key:0,node:x},void 0,!0):R("",!0),X==0?(f(),M("div",gs)):R("",!0),X==0?(f(),M("div",bs)):R("",!0),X==t.value.conditionNodes.length-1?(f(),M("div",ys)):R("",!0),X==t.value.conditionNodes.length-1?(f(),M("div",ws)):R("",!0)]))),128))]),t.value.conditionNodes.length>1?(f(),E(he,{key:0,modelValue:t.value.childNode,"onUpdate:modelValue":L[0]||(L[0]=x=>t.value.childNode=x),disabled:P.disabled},null,8,["modelValue","disabled"])):R("",!0),v(n).type!==0?(f(),E(Ql,{key:1,open:d.value,"onUpdate:open":L[1]||(L[1]=x=>d.value=x),modelValue:t.value.conditionNodes[0],"onUpdate:modelValue":L[2]||(L[2]=x=>t.value.conditionNodes[0]=x)},null,8,["open","modelValue"])):R("",!0),l(Zl,{open:m.value,"onUpdate:open":L[3]||(L[3]=x=>m.value=x),modelValue:r.value,"onUpdate:modelValue":L[4]||(L[4]=x=>r.value=x),onSave:S},null,8,["open","modelValue"]),v(n).type!==0?(f(),E(ft,{key:2,id:V.value,show:y.value,"onUpdate:show":L[5]||(L[5]=x=>y.value=x),ids:g.value},{default:s(()=>[ks,l(q,{column:1,bordered:"","label-style":{width:"120px"}},{default:s(()=>[l(A,{label:"节点名称"},{default:s(()=>[U(I(t.value.conditionNodes[0].nodeName),1)]),_:1}),l(A,{label:"webhook"},{default:s(()=>{var x;return[U(I((x=t.value.conditionNodes[0].callback)==null?void 0:x.webhook),1)]}),_:1}),l(A,{label:"请求类型"},{default:s(()=>{var x;return[U(I(v(lt)[(x=t.value.conditionNodes[0].callback)==null?void 0:x.contentType]),1)]}),_:1}),l(A,{label:"密钥"},{default:s(()=>{var x;return[U(I((x=t.value.conditionNodes[0].callback)==null?void 0:x.secret),1)]}),_:1})]),_:1})]),_:1},8,["id","show","ids"])):R("",!0)])}}}),$s=pe(Ns,[["__scopeId","data-v-84fc8365"]]),xs=W({name:"NodeWrap",__name:"node-wrap",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=$({});return G(()=>i.modelValue,t=>{n.value=t},{immediate:!0}),G(()=>n.value,t=>{c("update:modelValue",t)}),(t,o)=>{const p=Do("NodeWrap",!0);return f(),M(le,null,[n.value.nodeType==1?(f(),E(ul,{key:0,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=u=>n.value=u),disabled:t.disabled},{default:s(u=>[u.node?(f(),E(p,{key:0,modelValue:u.node.childNode,"onUpdate:modelValue":m=>u.node.childNode=m,disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):R("",!0)]),_:1},8,["modelValue","disabled"])):R("",!0),n.value.nodeType==2?(f(),E(Yl,{key:1,modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=u=>n.value=u),disabled:t.disabled},{default:s(u=>[u.node?(f(),E(p,{key:0,modelValue:u.node.childNode,"onUpdate:modelValue":m=>u.node.childNode=m,disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):R("",!0)]),_:1},8,["modelValue","disabled"])):R("",!0),n.value.nodeType==3?(f(),E($s,{key:2,modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),disabled:t.disabled},{default:s(u=>[u.node?(f(),E(p,{key:0,modelValue:u.node.childNode,"onUpdate:modelValue":m=>u.node.childNode=m,disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):R("",!0)]),_:1},8,["modelValue","disabled"])):R("",!0),n.value.childNode?(f(),E(p,{key:3,modelValue:n.value.childNode,"onUpdate:modelValue":o[3]||(o[3]=u=>n.value.childNode=u),disabled:t.disabled},null,8,["modelValue","disabled"])):R("",!0)],64)}}}),Ss=W({name:"StartDetail",__name:"start-detail",props:{modelValue:{default:()=>({})},open:{type:Boolean,default:!1}},emits:["update:open"],setup(e,{emit:a}){const i=e,c=a,n=$(!1);G(()=>i.open,o=>{n.value=o},{immediate:!0});const t=()=>{c("update:open",!1)};return(o,p)=>{const u=$e,m=xe,d=Re;return f(),E(d,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=r=>n.value=r),title:"工作流详情",width:["500px","90%"],onAfterLeave:t},{default:s(()=>[l(m,{column:1,"label-placement":"left",bordered:"","label-style":{width:"120px"}},{default:s(()=>[l(u,{label:"工作流名称"},{default:s(()=>[U(I(o.modelValue.workflowName),1)]),_:1}),l(u,{label:"组名称"},{default:s(()=>[U(I(o.modelValue.groupName),1)]),_:1}),l(u,{label:"触发类型"},{default:s(()=>[U(I(v(j)(v(Io)[o.modelValue.triggerType])),1)]),_:1}),l(u,{label:"触发间隔"},{default:s(()=>[U(I(o.modelValue.triggerInterval)+" "+I(o.modelValue.triggerType===2?"秒":null),1)]),_:1}),l(u,{label:"执行超时时间"},{default:s(()=>[U(I(o.modelValue.executorTimeout)+" 秒",1)]),_:1}),l(u,{label:"阻塞策略"},{default:s(()=>[U(I(v(j)(v(Et)[o.modelValue.blockStrategy])),1)]),_:1}),l(u,{label:"工作流上下文"},{default:s(()=>[U(I(o.modelValue.wfContext),1)]),_:1}),l(u,{label:"工作流状态"},{default:s(()=>[U(I(v(j)(v(It)[o.modelValue.workflowStatus])),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Vs=W({name:"StartDrawer",__name:"start-drawer",props:{modelValue:{default:()=>({wfContexts:[]})},open:{type:Boolean,default:!1}},emits:["update:open","save"],setup(e,{emit:a}){const i=e,c=a,n=me();let t="";const o=$(!1),p=$({wfContexts:[]}),u=$([]);G(()=>i.open,V=>{o.value=V},{immediate:!0}),G(()=>i.modelValue,V=>{p.value=V,V.triggerType===2&&(p.value.triggerInterval=Number(V.triggerInterval)),V.workflowName?t=V.workflowName:V.groupName?t=V.groupName:t="请选择组",V.wfContext&&(p.value.wfContext=JSON.parse(V.wfContext),p.value.wfContexts=Ro(V.wfContext))},{immediate:!0});const m=$(),d=()=>{c("update:open",!1),o.value=!1},r=()=>{var V;(V=m.value)==null||V.validate(g=>{g||(p.value.wfContext=JSON.stringify(Mo(p.value.wfContexts)||{}),d(),c("save",p.value))}).catch(()=>{var g;return(g=window.$message)==null?void 0:g.warning("请检查表单信息")})};(async()=>{const{data:V,error:g}=await on();g||(u.value=V)})();const h=V=>{V===3?p.value.triggerInterval="* * * * * ?":V===2&&(p.value.triggerInterval=60)},y={groupName:{required:!0,message:"请选择组"},triggerType:{required:!0,message:"请选择触发类型"},triggerInterval:{required:!0,message:"请输入触发间隔"},executorTimeout:{required:!0,message:"请输入执行超时时间"},blockStrategy:{required:!0,message:"请选择阻塞策略"},workflowStatus:{required:!0,message:"请选择工作流状态"}};return(V,g)=>{const w=Ce,z=Oe,P=Pt,L=Mt,H=At,_=Ge,B=qe,D=Xe,N=Wt,T=ve,k=He,C=ae,F=Ye,ne=Fe;return f(),E(ne,{show:o.value,"onUpdate:show":g[10]||(g[10]=A=>o.value=A),"display-directive":"if",width:610,onAfterLeave:d},{default:s(()=>[l(F,{title:v(t)},{header:s(()=>[l(Ke,{modelValue:p.value.workflowName,"onUpdate:modelValue":g[0]||(g[0]=A=>p.value.workflowName=A),class:"max-w-570px min-w-570px"},null,8,["modelValue"])]),footer:s(()=>[l(C,{type:"primary",onClick:r},{default:s(()=>[U("保存")]),_:1}),l(C,{class:"ml-12px",onClick:d},{default:s(()=>[U("取消")]),_:1})]),default:s(()=>[l(k,{ref_key:"formRef",ref:m,model:p.value,rules:y,"label-align":"left","label-width":"100px"},{default:s(()=>[l(z,{path:"groupName",label:"组名称"},{default:s(()=>[l(w,{value:p.value.groupName,"onUpdate:value":g[1]||(g[1]=A=>p.value.groupName=A),placeholder:"请选择组",disabled:v(n).type===0&&v(Be)(v(n).id),options:u.value.map(A=>({label:A,value:A}))},null,8,["value","disabled","options"])]),_:1}),l(H,{cols:24,"x-gap":"20"},{default:s(()=>[l(P,{span:8},{default:s(()=>[l(z,{path:"triggerType",label:"触发类型"},{default:s(()=>[l(w,{value:p.value.triggerType,"onUpdate:value":[g[2]||(g[2]=A=>p.value.triggerType=A),h],placeholder:"请选择触发类型",options:v(Uo).map(A=>({label:v(j)(A.label),value:A.value}))},null,8,["value","options"])]),_:1})]),_:1}),l(P,{span:16},{default:s(()=>[l(z,{path:"triggerInterval",label:"触发间隔"},{default:s(()=>[p.value.triggerType===3?(f(),E(v(tn),{key:0,modelValue:p.value.triggerInterval,"onUpdate:modelValue":g[3]||(g[3]=A=>p.value.triggerInterval=A),placeholder:"请输入Cron表达式"},null,8,["modelValue"])):(f(),E(L,{key:1,value:p.value.triggerInterval,"onUpdate:value":g[4]||(g[4]=A=>p.value.triggerInterval=A),min:1,class:"w-full",placeholder:"请输入触发间隔"},{suffix:s(()=>[U("秒")]),_:1},8,["value"]))]),_:1})]),_:1})]),_:1}),l(H,{cols:24,"x-gap":"20"},{default:s(()=>[l(P,{span:8},{default:s(()=>[l(z,{path:"executorTimeout",label:"执行超时时间"},{default:s(()=>[l(L,{value:p.value.executorTimeout,"onUpdate:value":g[5]||(g[5]=A=>p.value.executorTimeout=A),placeholder:"请输入超时时间",min:1},{suffix:s(()=>[U("秒")]),_:1},8,["value"])]),_:1})]),_:1}),l(P,{span:16},{default:s(()=>[l(z,{path:"blockStrategy",label:"阻塞策略"},{default:s(()=>[l(D,{value:p.value.blockStrategy,"onUpdate:value":g[6]||(g[6]=A=>p.value.blockStrategy=A)},{default:s(()=>[l(B,null,{default:s(()=>[(f(!0),M(le,null,re(v(Lo),(A,q)=>(f(),E(_,{key:q,label:v(j)(A.label),value:A.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),l(z,{path:"wfContext",label:"工作流上下文","show-feedback":!1},{default:s(()=>[l(N,{value:p.value.wfContexts,"onUpdate:value":g[7]||(g[7]=A=>p.value.wfContexts=A),path:"wfContexts"},null,8,["value"])]),_:1}),l(z,{path:"workflowStatus",label:"节点状态"},{default:s(()=>[l(D,{value:p.value.workflowStatus,"onUpdate:value":g[8]||(g[8]=A=>p.value.workflowStatus=A)},{default:s(()=>[l(B,null,{default:s(()=>[(f(!0),M(le,null,re(v(ut),(A,q)=>(f(),E(_,{key:q,label:v(j)(A.label),value:A.value},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),l(z,{path:"description",label:"描述"},{default:s(()=>[l(T,{value:p.value.description,"onUpdate:value":g[9]||(g[9]=A=>p.value.description=A),type:"textarea",autosize:{minRows:5},placeholder:"请输入描述"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])}}}),Qe=e=>(Te("data-v-e0e4d99d"),e=e(),De(),e),Bs={class:"node-wrap"},Cs={class:"title"},Ts={class:"text"},Ds={class:"text-#ff943e"},Is={key:0,class:"content"},Rs=Qe(()=>b("span",{class:"content_label"},"组名称: ",-1)),Us=Qe(()=>b("span",{class:"content_label"},"阻塞策略: ",-1)),Ls=Qe(()=>b("div",null,".........",-1)),Ms={key:1,class:"content min-h-85px"},js=Qe(()=>b("span",{class:"placeholder"},"请配置工作流",-1)),Es=[js],zs=W({name:"StartNode",__name:"start-node",props:{modelValue:{default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const i=e,c=a,n=me(),t=$({}),o=$({});G(()=>i.modelValue,r=>{o.value=r},{immediate:!0}),G(()=>o.value,r=>{c("update:modelValue",r)}),G(()=>{var r;return(r=o.value)==null?void 0:r.groupName},r=>{r&&n.setJobList(r)},{immediate:!0});const p=$(!1),u=$(!1),m=r=>{o.value=r},d=()=>{n.type===0?(t.value=JSON.parse(JSON.stringify(o.value)),p.value=!0):u.value=!0};return(r,S)=>{const h=Je,y=Ae,V=We,g=Ie;return f(),M("div",Bs,[b("div",{class:ke([`${r.disabled?"start-node-disabled":"node-wrap-box-hover"} ${v(n).type===2?"node-error-success":""}`,"node-wrap-box start-node"]),onClick:d},[b("div",Cs,[b("span",Ts,[l(h,{dot:"",color:o.value.workflowStatus===1?"#52c41a":"#ff000d"},null,8,["color"]),b("span",Ds,"  "+I(o.value.workflowName?`${o.value.workflowName} ${o.value.id?` (${o.value.id})`:""}`:"请选择组"),1)])]),o.value.groupName?(f(),M("div",Is,[b("div",null,[Rs,l(y,{class:"max-w-132px"},{default:s(()=>[U(I(o.value.groupName),1)]),_:1})]),b("div",null,[Us,U(" "+I(v(j)(v(Et)[o.value.blockStrategy])),1)]),Ls])):(f(),M("div",Ms,Es)),v(n).type===2?(f(),E(g,{key:2},{trigger:s(()=>[b("div",{class:"error-tip text-24px",style:ue({color:v(te)[3].color})},[l(V,{icon:v(te)[3].icon},null,8,["icon"])],4)]),default:s(()=>[U(" "+I(v(te)[3].title),1)]),_:1})):R("",!0)],2),l(he,{modelValue:o.value.nodeConfig,"onUpdate:modelValue":S[0]||(S[0]=w=>o.value.nodeConfig=w),disabled:r.disabled},null,8,["modelValue","disabled"]),v(n).type!==0?(f(),E(Ss,{key:0,open:u.value,"onUpdate:open":S[1]||(S[1]=w=>u.value=w),modelValue:o.value,"onUpdate:modelValue":S[2]||(S[2]=w=>o.value=w)},null,8,["open","modelValue"])):R("",!0),l(Vs,{open:p.value,"onUpdate:open":S[3]||(S[3]=w=>p.value=w),modelValue:t.value,"onUpdate:modelValue":S[4]||(S[4]=w=>t.value=w),onSave:m},null,8,["open","modelValue"])])}}}),Ps=pe(zs,[["__scopeId","data-v-e0e4d99d"]]),As={class:"workflow"},Os={class:"workflow-affix"},qs={class:"header"},Hs={class:"ml-8px mr-8px text-18px text-#333639 dark:text-#d6d6d6"},Ys={key:0,class:"buttons"},Fs={key:1,class:"buttons"},Ws={class:"workflow-body"},Xs={class:"box-scale"},Gs={class:"end-node"},Js=b("div",{class:"end-node-circle"},null,-1),Ks={class:"end-node-text"},ui=W({name:"SnailWorkflow",__name:"workflow",props:{modelValue:{default:()=>({})},spinning:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","save","cancel"],setup(e,{emit:a}){const i=e,c=a,n=Rt(),t=$(100),o=$({}),p=async()=>{c("save")},u=()=>{c("cancel")};G(()=>i.modelValue,h=>{o.value=h},{immediate:!0}),G(()=>o.value,h=>{c("update:modelValue",h)});const m=h=>{if(t.value+=10*h,h>0){const y=document.querySelector(".workflow-body");y&&(t.value<=160&&y.scrollTo({left:280*t.value/100,behavior:"smooth"}),t.value>160&&y.scrollTo({left:420*t.value/100,behavior:"smooth"}),t.value>200&&y.scrollTo({left:520*t.value/100,behavior:"smooth"}))}t.value<=10?t.value=10:t.value>=300&&(t.value=300)},d=h=>{h.preventDefault(),h.wheelDelta<0?m(-1):m(1)};ze(()=>{const h=document.querySelector(".workflow");h&&(h.onwheel=y=>d(y))});const r=()=>{const h=document.querySelector(".workflow-design");h&&h.setAttribute("style",`cursor: grabbing; transform: scale(${t.value/100})`)},S=()=>{const h=document.querySelector(".workflow-design");h&&h.setAttribute("style",`cursor: grab; transform: scale(${t.value/100})`)};return(h,y)=>{const V=jn,g=ae,w=Ie,z=qt,P=dn,L=Ut;return f(),M("div",As,[b("div",Os,[l(P,{"trigger-top":0,class:"position-sticky z-2"},{default:s(()=>[b("div",qs,[b("div",null,[l(w,null,{trigger:s(()=>[l(g,{size:"small",strong:"",circle:"",onClick:y[0]||(y[0]=H=>m(-1))},{default:s(()=>[l(V)]),_:1})]),default:s(()=>[U(" 缩小 ")]),_:1}),b("span",Hs,I(t.value)+"%",1),l(w,null,{trigger:s(()=>[l(g,{size:"small",strong:"",circle:"",onClick:y[1]||(y[1]=H=>m(1))},{default:s(()=>[l(z)]),_:1})]),default:s(()=>[U(" 放大 ")]),_:1})]),h.disabled?R("",!0):(f(),M("div",Ys,[l(g,{type:"info",onClick:p},{default:s(()=>[U("保存")]),_:1}),l(g,{class:"ml-16px",onClick:u},{default:s(()=>[U("取消")]),_:1})])),h.disabled&&v(n).buttons?(f(),M("div",Fs,[Ne(h.$slots,"buttons")])):R("",!0)])]),_:3}),l(L,{show:h.spinning},{default:s(()=>[b("div",Ws,[l(v(Ht),{class:"vue-drag","is-draggable":!0,"is-resizable":!1,z:1,onDragging:r,onDragstop:S},{default:s(()=>[b("div",{class:"workflow-design",style:ue(`transform: scale(${t.value/100})`)},[b("div",Xs,[l(Ps,{modelValue:o.value,"onUpdate:modelValue":y[2]||(y[2]=H=>o.value=H),disabled:h.disabled},null,8,["modelValue","disabled"]),o.value.nodeConfig?(f(),E(xs,{key:0,modelValue:o.value.nodeConfig,"onUpdate:modelValue":y[3]||(y[3]=H=>o.value.nodeConfig=H),disabled:h.disabled},null,8,["modelValue","disabled"])):R("",!0),b("div",Gs,[Js,b("div",Ks,I(v(j)("workflow.node.endNode")),1)])])],4)]),_:1})])]),_:1},8,["show"])])])}}});export{ui as _,me as u};
