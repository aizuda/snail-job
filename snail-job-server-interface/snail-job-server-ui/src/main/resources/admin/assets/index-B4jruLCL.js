import{a as R,b as B,N as M}from"./search-form-2lTL1-HK.js";import{_ as P}from"./delete-alert-B5eu0EWD.js";import{d as w,a0 as $,a1 as C,c as E,o as T,w as d,f as o,h as e,$ as a,D as F,K as O,b as U,ag as y,F as z,ay as K,Z as A,ah as G,B as J,ai as V}from"./index-C0p55rrf.js";import{a as k,b as q}from"./job-BTjPiUsA.js";import{_ as H,u as L,a as Z}from"./table-B8N7pgiA.js";import{_ as Q}from"./select-group.vue_vue_type_script_setup_true_lang-BHwrakTI.js";import{b as W}from"./Grid-DvIYbIW9.js";import"./CollapseItem-BWVJFROc.js";import"./group-Bzk_FTzz.js";const X=w({name:"JobExecutorSearch",__name:"job-executor-search",props:{model:{required:!0},modelModifiers:{}},emits:$(["reset","search"],["update:model"]),setup(c,{emit:g}){const m=g,l=C(c,"model");function i(){m("reset")}function _(){m("search")}return(x,r)=>{const f=H,s=F,h=R;return T(),E(h,{"btn-span":"24 s:12 m:12",model:l.value,onSearch:_,onReset:i},{default:d(()=>[o(f,{span:"24 s:12 m:6",label:e(a)("page.jobTask.groupName"),path:"groupName",class:"pr-24px"},{default:d(()=>[o(Q,{value:l.value.groupName,"onUpdate:value":r[0]||(r[0]=u=>l.value.groupName=u),clearable:""},null,8,["value"])]),_:1},8,["label"]),o(f,{span:"24 s:12 m:6",label:e(a)("page.jobTask.executorInfo"),path:"executorInfo",class:"pr-24px","label-width":100},{default:d(()=>[o(s,{value:l.value.executorInfo,"onUpdate:value":r[1]||(r[1]=u=>l.value.executorInfo=u),placeholder:e(a)("page.jobTask.form.executorInfo"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])}}}),Y={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function v(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!V(c)}const ie=w({name:"job_executor",__name:"index",setup(c){const g=O(),{columns:m,data:l,getData:i,loading:_,mobilePagination:x,searchParams:r,resetSearchParams:f}=L({apiFn:q,apiParams:{page:1,size:10,groupName:null,executorInfo:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:a("common.index"),align:"center",width:48},{key:"groupName",title:a("page.jobTask.groupName"),align:"center",width:120},{key:"executorInfo",title:a("page.jobTask.executorInfo"),align:"center",width:300},{key:"executorType",title:a("page.jobTask.executorType"),align:"center",width:80,render:n=>{if(n.executorType===null)return null;const t=a(K[n.executorType]);return o(A,{type:{1:"info",2:"info",3:"info"}[n.executorType]},v(t)?t:{default:()=>[t]})}},{key:"updateDt",title:a("page.jobTask.updateDt"),align:"center",width:120},{key:"operate",title:a("common.operate"),align:"center",width:80,fixed:"right",render:n=>o("div",{class:"flex-center gap-8px"},[o(G,{vertical:!0},null),o(M,{onPositiveClick:()=>N(n.id)},{default:()=>a("common.confirmDelete"),trigger:()=>{let t;return o(J,{type:"error",text:!0,ghost:!0,size:"small"},v(t=a("common.delete"))?t:{default:()=>[t]})}})])}]}),{checkedRowKeys:s,onDeleted:h,onBatchDeleted:u}=Z(l,i);async function N(n){const{error:t}=await k([n]);t||h()}async function D(){const{error:n}=await k(s.value);n||u()}return(n,t)=>{const b=P,j=B,I=W,S=z;return T(),U("div",Y,[o(X,{model:e(r),"onUpdate:model":t[0]||(t[0]=p=>y(r)?r.value=p:null),onReset:e(f),onSearch:e(i)},null,8,["model","onReset","onSearch"]),o(b),o(S,{title:"执行器列表",bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper","header-class":"view-card-header"},{"header-extra":d(()=>[o(j,{"disabled-delete":e(s).length===0,loading:e(_),"show-add":!1,onDelete:D,onRefresh:e(i)},null,8,["disabled-delete","loading","onRefresh"])]),default:d(()=>[o(I,{"checked-row-keys":e(s),"onUpdate:checkedRowKeys":t[1]||(t[1]=p=>y(s)?s.value=p:null),columns:e(m),data:e(l),"flex-height":!e(g).isMobile,"scroll-x":1e3,loading:e(_),remote:"","row-key":p=>p.id,pagination:e(x),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"])]),_:1})])}}});export{ie as default};
