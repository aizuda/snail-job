import{bn as P,c$ as L,d0 as U,bo as K,bq as N,bt as W,b9 as j,d as $,aj as r,Z as E,D as q,B as H,bz as J,d1 as M,E as Q,bb as Z,bB as G,bL as X,r as v,bc as w,bK as Y,bJ as ee,a as V,be as te,an as ne,bQ as A,d2 as se}from"./index-C0p55rrf.js";import{f as ae}from"./Grid-DvIYbIW9.js";const ie=P({name:"DynamicTags",common:W,peers:{Input:N,Button:K,Tag:U,Space:L},self(){return{inputWidth:"64px"}}}),le=j("dynamic-tags",[j("input",{minWidth:"var(--n-input-width)"})]),ue=Object.assign(Object.assign(Object.assign({},w.props),se),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputClass:String,inputStyle:[String,Object],inputProps:Object,max:Number,tagClass:String,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),de=$({name:"DynamicTags",props:ue,slots:Object,setup(t){const{mergedClsPrefixRef:b,inlineThemeDisabled:d}=Z(t),{localeRef:c}=G("DynamicTags"),m=X(t),{mergedDisabledRef:a}=m,g=v(""),p=v(!1),h=v(!0),y=v(null),C=w("DynamicTags","-dynamic-tags",le,ie,t,b),T=v(t.defaultValue),F=Y(t,"value"),l=ee(F,T),O=V(()=>c.value.add),_=V(()=>ae(t.size)),z=V(()=>a.value||!!t.max&&l.value.length>=t.max);function R(e){const{onChange:n,"onUpdate:value":s,onUpdateValue:o}=t,{nTriggerFormInput:k,nTriggerFormChange:x}=m;n&&A(n,e),o&&A(o,e),s&&A(s,e),T.value=e,k(),x()}function I(e){const n=l.value.slice(0);n.splice(e,1),R(n)}function D(e){switch(e.key){case"Enter":u()}}function u(e){const n=e??g.value;if(n){const s=l.value.slice(0);s.push(t.onCreate(n)),R(s)}p.value=!1,h.value=!0,g.value=""}function B(){u()}function S(){p.value=!0,ne(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),h.value=!1})}const f=V(()=>{const{self:{inputWidth:e}}=C.value;return{"--n-input-width":e}}),i=d?te("dynamic-tags",void 0,f,t):void 0;return{mergedClsPrefix:b,inputInstRef:y,localizedAdd:O,inputSize:_,inputValue:g,showInput:p,inputForceFocused:h,mergedValue:l,mergedDisabled:a,triggerDisabled:z,handleInputKeyDown:D,handleAddClick:S,handleInputBlur:B,handleCloseClick:I,handleInputConfirm:u,mergedTheme:C,cssVars:d?void 0:f,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){const{mergedTheme:t,cssVars:b,mergedClsPrefix:d,onRender:c,renderTag:m}=this;return c==null||c(),r(Q,{class:[`${d}-dynamic-tags`,this.themeClass],size:"small",style:b,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:a,tagClass:g,tagStyle:p,type:h,round:y,size:C,color:T,closable:F,mergedDisabled:l,showInput:O,inputValue:_,inputClass:z,inputStyle:R,inputSize:I,inputForceFocused:D,triggerDisabled:u,handleInputKeyDown:B,handleInputBlur:S,handleAddClick:f,handleCloseClick:i,handleInputConfirm:e,$slots:n}=this;return this.mergedValue.map((s,o)=>m?m(s,o):r(E,{key:o,theme:a.peers.Tag,themeOverrides:a.peerOverrides.Tag,class:g,style:p,type:h,round:y,size:C,color:T,closable:F,disabled:l,onClose:()=>{i(o)}},{default:()=>typeof s=="string"?s:s.label})).concat(O?n.input?n.input({submit:e,deactivate:S}):r(q,Object.assign({placeholder:"",size:I,style:R,class:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:_,onUpdateValue:s=>{this.inputValue=s},theme:a.peers.Input,themeOverrides:a.peerOverrides.Input,onKeydown:B,onBlur:S,internalForceFocus:D})):n.trigger?n.trigger({activate:f,disabled:u}):r(H,{dashed:!0,disabled:u,theme:a.peers.Button,themeOverrides:a.peerOverrides.Button,size:I,onClick:f},{icon:()=>r(J,{clsPrefix:d},{default:()=>r(M,null)})}))}})}});export{de as _};
