import{a as R,b as B,N as M}from"./search-form-CSouas8Y.js";import{_ as P}from"./delete-alert-CMbkkQNx.js";import{d as w,Z as C,a0 as E,c as $,o as T,w as d,f as o,h as e,$ as a,C as O,J as U,b as z,af as k,E as F,ax as J,Y as A,ag as G,B as K,ah as V}from"./index-DsXulf34.js";import{a as y,b as q}from"./job-DnRsninN.js";import{_ as H,u as L,a as Y}from"./table-C5lzqi4D.js";import{_ as Z}from"./select-group.vue_vue_type_script_setup_true_lang-KMOD_UM1.js";import{b as Q}from"./Grid-DdJm4X1d.js";import"./CollapseItem-4hJT8hQy.js";import"./group-DephWMPB.js";const W=w({name:"JobExecutorSearch",__name:"job-executor-search",props:{model:{required:!0},modelModifiers:{}},emits:C(["reset","search"],["update:model"]),setup(c,{emit:g}){const m=g,l=E(c,"model");function i(){m("reset")}function f(){m("search")}return(x,r)=>{const _=H,s=O,h=R;return T(),$(h,{"btn-span":"24 s:12 m:12",model:l.value,onSearch:f,onReset:i},{default:d(()=>[o(_,{span:"24 s:12 m:6",label:e(a)("page.jobTask.groupName"),path:"groupName",class:"pr-24px"},{default:d(()=>[o(Z,{value:l.value.groupName,"onUpdate:value":r[0]||(r[0]=u=>l.value.groupName=u),clearable:""},null,8,["value"])]),_:1},8,["label"]),o(_,{span:"24 s:12 m:6",label:e(a)("page.jobTask.executorInfo"),path:"executorInfo",class:"pr-24px","label-width":100},{default:d(()=>[o(s,{value:l.value.executorInfo,"onUpdate:value":r[1]||(r[1]=u=>l.value.executorInfo=u),placeholder:e(a)("page.jobTask.form.executorInfo"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])}}}),X={class:"min-h-500px flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"};function v(c){return typeof c=="function"||Object.prototype.toString.call(c)==="[object Object]"&&!V(c)}const ie=w({name:"job_executor",__name:"index",setup(c){const g=U(),{columns:m,data:l,getData:i,loading:f,mobilePagination:x,searchParams:r,resetSearchParams:_}=L({apiFn:q,apiParams:{page:1,size:10,groupName:null,executorInfo:null},columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:a("common.index"),align:"center",width:48},{key:"groupName",title:a("page.jobTask.groupName"),align:"center",width:120},{key:"executorInfo",title:a("page.jobTask.executorInfo"),align:"center",width:300},{key:"executorType",title:a("page.jobTask.executorType"),align:"center",width:80,render:n=>{if(n.executorType===null)return null;const t=a(J[n.executorType]);return o(A,{type:{1:"info",2:"info",3:"info"}[n.executorType]},v(t)?t:{default:()=>[t]})}},{key:"updateDt",title:a("page.jobTask.updateDt"),align:"center",width:120},{key:"operate",title:a("common.operate"),align:"center",width:80,fixed:"right",render:n=>o("div",{class:"flex-center gap-8px"},[o(G,{vertical:!0},null),o(M,{onPositiveClick:()=>N(n.id)},{default:()=>a("common.confirmDelete"),trigger:()=>{let t;return o(K,{type:"error",text:!0,ghost:!0,size:"small"},v(t=a("common.delete"))?t:{default:()=>[t]})}})])}]}),{checkedRowKeys:s,onDeleted:h,onBatchDeleted:u}=Y(l,i);async function N(n){const{error:t}=await y([n]);t||h()}async function j(){const{error:n}=await y(s.value);n||u()}return(n,t)=>{const b=P,D=B,I=Q,S=F;return T(),z("div",X,[o(W,{model:e(r),"onUpdate:model":t[0]||(t[0]=p=>k(r)?r.value=p:null),onReset:e(_),onSearch:e(i)},null,8,["model","onReset","onSearch"]),o(b),o(S,{title:"执行器列表",bordered:!1,size:"small",class:"card-wrapper sm:flex-1-hidden","header-class":"view-card-header"},{"header-extra":d(()=>[o(D,{"disabled-delete":e(s).length===0,loading:e(f),"show-add":!1,onDelete:j,onRefresh:e(i)},null,8,["disabled-delete","loading","onRefresh"])]),default:d(()=>[o(I,{"checked-row-keys":e(s),"onUpdate:checkedRowKeys":t[1]||(t[1]=p=>k(s)?s.value=p:null),columns:e(m),data:e(l),"flex-height":!e(g).isMobile,"scroll-x":1e3,loading:e(f),remote:"","row-key":p=>p.id,pagination:e(x),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"])]),_:1})])}}});export{ie as default};
